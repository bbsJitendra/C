"use strict";(self.webpackChunkESG=self.webpackChunkESG||[]).push([["src_app_components_organizationAdmin_organization_module_ts"],{7677:(St,z,c)=>{c.r(z),c.d(z,{OrganizationModule:()=>F});var g=c(6575),P=c(908),m=c(6861),f=c(5431),e=c(1699),w=c(8375),_=c(6288),E=c(5745),I=c(2458),Q=c(8848),d=c(2024),te=c(8026),ie=c(5288),S=c(9541),j=c(9750);function ne(s,i){if(1&s&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.s9C("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.designation," ")}}function ae(s,i){if(1&s&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.s9C("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.department," ")}}function oe(s,i){if(1&s&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.s9C("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.userType," ")}}function se(s,i){if(1&s&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.s9C("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.dropdownValue," ")}}function re(s,i){if(1&s&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.s9C("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.dropdownValue," ")}}function de(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",30)(1,"label",15),e._uU(2,"Regional Office"),e.qZA(),e.TgZ(3,"select",29),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw(2);return e.KtG(o.modelData.data.regionalOfficeId=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeError("regionalOfficeId"))})("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.getSiteOffice(!0))}),e.TgZ(4,"option",21),e._uU(5,"Please choose"),e.qZA(),e.YNc(6,re,2,2,"option",22),e.qZA()()}if(2&s){const t=e.oxw(2);e.xp6(3),e.ekj("error",null==t.errorField?null:t.errorField.regionalOfficeId),e.Q6J("ngModel",t.modelData.data.regionalOfficeId),e.xp6(3),e.Q6J("ngForOf",t.rigionalOfficeList)}}function le(s,i){if(1&s&&(e.TgZ(0,"option",38),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.s9C("value",null==t?null:t.id),e.xp6(1),e.hij(" ",null==t?null:t.dropdownValue," ")}}function ce(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",30)(1,"label",15),e._uU(2,"Site Office"),e.qZA(),e.TgZ(3,"select",20),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw(2);return e.KtG(o.modelData.data.siteOfficeId=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.removeError("siteOfficeId"))}),e.TgZ(4,"option",21),e._uU(5,"Please choose"),e.qZA(),e.YNc(6,le,2,2,"option",22),e.qZA()()}if(2&s){const t=e.oxw(2);e.xp6(3),e.ekj("error",null==t.errorField?null:t.errorField.siteOfficeId),e.Q6J("ngModel",t.modelData.data.siteOfficeId),e.xp6(3),e.Q6J("ngForOf",t.siteOfficeList)}}function pe(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"label",11),e._UZ(3,"img",12),e.qZA(),e.TgZ(4,"input",13),e.NdJ("change",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.onSelectFiles(a))}),e.qZA()(),e.TgZ(5,"div",14)(6,"div")(7,"label",15),e._uU(8,"Name"),e.qZA(),e.TgZ(9,"input",16),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.modelData.data.firstName=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeError("firstName"))}),e.qZA()()(),e.TgZ(10,"div",14)(11,"div")(12,"label",15),e._uU(13,"Employee Id"),e.qZA(),e.TgZ(14,"input",17),e.NdJ("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeError("employeeId"))})("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.modelData.data.employeeId=a)}),e.qZA()()(),e.TgZ(15,"div",18)(16,"div",19)(17,"label",15),e._uU(18,"Designation"),e.qZA(),e.TgZ(19,"select",20),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.modelData.data.designationId=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeError("designationId"))}),e.TgZ(20,"option",21),e._uU(21,"Please choose"),e.qZA(),e.YNc(22,ne,2,2,"option",22),e.qZA()()(),e.TgZ(23,"div",23)(24,"label",15),e._uU(25,"Email"),e.qZA(),e.TgZ(26,"input",24),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.modelData.data.emailId=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeError("emailId"))}),e.qZA()(),e.TgZ(27,"div",23)(28,"label",15),e._uU(29,"Contact no."),e.qZA(),e.TgZ(30,"input",25),e.NdJ("input",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.onInputChange(a))})("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.modelData.data.phoneNumber=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeError("phoneNumber"))}),e.qZA()(),e.TgZ(31,"div",26)(32,"label",15),e._uU(33,"Department"),e.qZA(),e.TgZ(34,"select",27),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.modelData.data.departmentId=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeError("departmentId"))}),e.TgZ(35,"option",21),e._uU(36,"Please choose"),e.qZA(),e.YNc(37,ae,2,2,"option",22),e.qZA()(),e.TgZ(38,"div",28)(39,"label",15),e._uU(40,"Role"),e.qZA(),e.TgZ(41,"select",29),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.modelData.data.userTypeId=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeError("userTypeId"))})("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changeRole())}),e.TgZ(42,"option",21),e._uU(43,"Please choose"),e.qZA(),e.YNc(44,oe,2,2,"option",22),e.qZA()(),e.TgZ(45,"div",30)(46,"label",15),e._uU(47,"Corporate Office"),e.qZA(),e.TgZ(48,"select",29),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.modelData.data.corporateOfficeId=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeError("corporateOfficeId"))})("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getRegionalOffice(!0))}),e.TgZ(49,"option",21),e._uU(50,"Please choose"),e.qZA(),e.YNc(51,se,2,2,"option",22),e.qZA()(),e.YNc(52,de,7,4,"div",31),e.YNc(53,ce,7,4,"div",31),e.TgZ(54,"div",32),e._UZ(55,"label",15)(56,"br"),e.TgZ(57,"input",33),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG((null==o.modelData?null:o.modelData.data).isOutsideUser=a)}),e.qZA(),e._uU(58," \xa0 "),e.TgZ(59,"label",34),e._uU(60,"Outside User"),e.qZA(),e._UZ(61,"br"),e.qZA(),e.TgZ(62,"div",35)(63,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onCancel())}),e._uU(64,"Cancel"),e.qZA(),e.TgZ(65,"button",37),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.validateField())}),e._uU(66,"Submit"),e.qZA()()()}if(2&s){const t=e.oxw();e.xp6(3),e.Q6J("ngClass",t.imageUrl?"imageUrl":"imageUrl1")("src",t.imageUrl?t.imageUrl:"../../../../assets/images/camera_icon2.png",e.LSH),e.xp6(1),e.Q6J("accept","image/*"),e.xp6(5),e.ekj("error",null==t.errorField?null:t.errorField.firstName),e.Q6J("disabled","Edit User"==t.modelData.header)("ngModel",t.modelData.data.firstName),e.xp6(5),e.ekj("error",null==t.errorField?null:t.errorField.employeeId),e.Q6J("ngModel",t.modelData.data.employeeId),e.xp6(5),e.ekj("error",null==t.errorField?null:t.errorField.designationId),e.Q6J("ngModel",t.modelData.data.designationId),e.xp6(3),e.Q6J("ngForOf",t.designationList),e.xp6(4),e.ekj("error",null==t.errorField?null:t.errorField.emailId),e.Q6J("disabled","Edit User"==t.modelData.header)("ngModel",t.modelData.data.emailId),e.xp6(4),e.ekj("error",null==t.errorField?null:t.errorField.phoneNumber),e.Q6J("disabled","Edit User"==t.modelData.header)("ngModel",t.modelData.data.phoneNumber),e.xp6(4),e.ekj("error",null==t.errorField?null:t.errorField.departmentId),e.Q6J("disabled","Edit User"==t.modelData.header)("ngModel",t.modelData.data.departmentId),e.xp6(3),e.Q6J("ngForOf",t.departmentList),e.xp6(4),e.ekj("error",null==t.errorField?null:t.errorField.userTypeId),e.Q6J("ngModel",t.modelData.data.userTypeId),e.xp6(3),e.Q6J("ngForOf",t.userTypeList),e.xp6(4),e.ekj("error",null==t.errorField?null:t.errorField.corporateOfficeId),e.Q6J("ngModel",t.modelData.data.corporateOfficeId),e.xp6(3),e.Q6J("ngForOf",t.corporateOfficeList),e.xp6(1),e.Q6J("ngIf","4"==t.modelData.data.userTypeId||"5"==t.modelData.data.userTypeId),e.xp6(1),e.Q6J("ngIf","4"==t.modelData.data.userTypeId),e.xp6(4),e.Q6J("ngModel",null==t.modelData?null:t.modelData.data.isOutsideUser)}}function ge(s,i){if(1&s&&(e.TgZ(0,"span",48),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.xp6(1),e.Oqu(t.label)}}function ue(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",39)(1,"div",40)(2,"div")(3,"label",15),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"input",41),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.modelData.data.name=a)}),e.qZA()()(),e.TgZ(6,"div",40)(7,"label",15),e._uU(8,"Access"),e.qZA(),e.TgZ(9,"p-treeSelect",42),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedFiles=a)}),e.YNc(10,ge,2,1,"ng-template",43),e.qZA()(),e.TgZ(11,"div",40)(12,"label",15),e._uU(13,"Department"),e.qZA(),e.TgZ(14,"input",44),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.modelData.data.department=a)}),e.qZA()(),e.TgZ(15,"div",45)(16,"button",46),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onCancel())}),e._uU(17," Cancel "),e.qZA(),e.TgZ(18,"button",47),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.confirmationDialog())}),e._uU(19," Submit "),e.qZA()()()}if(2&s){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.modelData.data.name),e.xp6(4),e.Q6J("ngModel",t.selectedFiles)("options",t.files)("metaKeySelection",!1)("scrollHeight","15.152vw")("filter",!1)("appendTo","body"),e.xp6(5),e.Q6J("ngModel",t.modelData.data.department)}}const me=function(s){return{height80:s}};class y{constructor(i,t,n,a,o,r,l,p){this.dialogRef=i,this.spinner=t,this.messageService=n,this.userManagementService=a,this.organizationService=o,this.userAccessMgt=r,this.dialog=l,this.parentData=p,this.moduleMasterdropdownList=[],this.subModuleMasterdropdownList=[],this.selectedItems=[],this.dropdownSettings={},this.departmentList=[],this.userTypeList=[],this.designationList=[],this.selectedFiles=[],this.UserAddModuleAccess=[],this.methodType="",this.corporateOfficeList=[],this.rigionalOfficeList=[],this.siteOfficeList=[],this.emailRegex="^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,4}$",this.modelData=p,p?.data?.photo&&(this.imageUrl=p?.data?.photo),this.dropdownSettings={singleSelection:!1,idField:"id",textField:"module",selectAllText:"Select All",unSelectAllText:"Reset All",itemsShowLimit:3}}showData(){const i=this.modelData.data.id;"No Access"==this.modelData.data.accessLevel?this.methodType="Add":this.methodType="Update",this.spinner.show();for(let a=0;a<this.selectedFiles?.length;a++){var n={UserId:i,key:this.selectedFiles[a].key,label:this.selectedFiles[a].label,isParent:!1};this.UserAddModuleAccess.push(n)}this.userAccessMgt.addUserAccessModule(this.UserAddModuleAccess,this.modelData.data.id,this.methodType).subscribe(a=>{this.selectedFiles=a.data,this.spinner.hide(),this.messageService.successToast("Module access updated successfully"),this.dialogRef.close("ok"),this.spinner.hide()},a=>{this.spinner.hide(),this.dialogRef.close("ok")})}convertStringToNumber(i){const t=parseFloat(i);return isNaN(t)?null:t}ngOnInit(){this.getModuleList(),this.getSubModuleList(),this.getModuleSubModuleList(),this.modelData.data.corporateOfficeId&&this.getRegionalOffice(!1),this.modelData.data.regionalOfficeId&&this.getSiteOffice(!1),"Access"==this.modelData.tab?this.selectedModuleList(this.modelData.data.id):(this.getCorporateOffice(),this.getDepartmentList(),this.getDesignationList(),this.getAllUserType(),this.getLocation())}onCancel(){this.dialogRef.close("close")}selectedModuleList(i){this.userAccessMgt.getUserModuleAccessList(i).subscribe(t=>{this.selectedFiles=t.data,this.spinner.hide()})}onSelectFiles(i){const t=i.target.files[0];if(t.size/1024>=51)return this.messageService.errorToast("Please upload an image less than 50KB");if(t){const a=new FileReader;a.onload=o=>{this.imageUrl=o.target.result,this.modelData?.data?.id&&this.modelData?.data?.id>0?this.modelData.data.updatedPhoto=o.target.result?.split(";base64,")[1]:this.modelData.data.photo=o.target.result?.split(";base64,")[1]},a.readAsDataURL(t)}}getDepartmentList(){this.spinner.show(),this.organizationService.getListOfDepartment().subscribe(i=>{this.departmentList=i.data,this.spinner.hide()})}getDesignationList(){this.organizationService.getDesignationList().subscribe(i=>{this.designationList=i.data})}getAllUserType(){this.organizationService.getAllUserType().subscribe(i=>{this.userTypeList=i.data})}getLocation(){this.spinner.show(),this.userManagementService.getLocation().subscribe(i=>{this.locationList=i.data,this.spinner.hide()})}getModuleList(){this.spinner.show(),this.userAccessMgt.getModuleList().subscribe(i=>{this.moduleMasterdropdownList=i.data,this.spinner.hide()})}getSubModuleList(){this.spinner.show(),this.userAccessMgt.getSubModuleList().subscribe(i=>{this.subModuleMasterdropdownList=i.data,this.spinner.hide()})}getModuleSubModuleList(){this.spinner.show(),this.userAccessMgt.getModuleSubModuleList().subscribe(i=>{this.files=i.data,this.spinner.hide()})}getCorporateOffice(){this.corporateOfficeList=[],this.userAccessMgt.getCorporateOfficeList().subscribe(i=>{i.data?this.corporateOfficeList=i.data:(this.corporateOfficeList=[],this.messageService.errorToast(i.errorMessage))})}removeError(i){this.errorField&&this.errorField[i]&&(this.errorField[i]=!1)}onInputChange(i){const t=i.target.value;i.target.value=t.replace(/\D/g,"").slice(0,10),this.modelData.data.phoneNumber=t.replace(/\D/g,"").slice(0,10)}validateField(){let i=this.modelData.data;i.firstName&&i.employeeId&&i.designationId&&i.emailId&&i.phoneNumber&&i.departmentId&&i.userTypeId&&i.corporateOfficeId&&(4!=i.userTypeId&&5!=i.userTypeId||i.regionalOfficeId)&&(4!=i.userTypeId||i.siteOfficeId)?/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(i.emailId)?10!=i.phoneNumber.length?(this.errorField={phoneNumber:!0},this.messageService.errorToast("Please enter a valid mobile number.")):this.modelData?.data?.id>0?this.updateUSerData():this.submitUserData():(this.errorField={emailId:!0},this.messageService.errorToast("Please enter a valid email.")):(this.messageService.errorToast("Please fill all required fields."),this.errorField={firstName:!i.firstName,employeeId:!i.employeeId,designationId:!i.designationId,emailId:!i.emailId,phoneNumber:!i.phoneNumber,departmentId:!i.departmentId,userTypeId:!i.userTypeId,locationId:!i.locationId,corporateOfficeId:!i.corporateOfficeId,regionalOfficeId:!i.regionalOfficeId,siteOfficeId:!i.siteOfficeId})}submitUserData(){this.modelData.data.departmentId=Number(this.modelData.data.departmentId),this.modelData.data.designationId=Number(this.modelData.data.designationId),this.modelData.data.userTypeId=Number(this.modelData.data.userTypeId),this.modelData.data.corporateOfficeId=Number(this.modelData.data.corporateOfficeId),this.modelData.data.regionalOfficeId=this.modelData.data.regionalOfficeId?Number(this.modelData.data.regionalOfficeId):null,this.modelData.data.siteOfficeId=this.modelData.data.siteOfficeId?Number(this.modelData.data.siteOfficeId):null,this.dialogRef1=this.dialog.open(f.z,{width:"24.514vw",height:"12.083vw",data:{header:"Save ?",data:{bodyData:"Are you sure, you want to submit the changes?"},button:{isSubmit:!0,isCancel:!0,isDelete:!1}}}),this.dialogRef1.disableClose=!0,this.dialogRef1.afterClosed().subscribe(i=>{"ok"==i&&(this.spinner.show(),this.userManagementService.addUsersData(this.modelData.data).subscribe(t=>{this.spinner.hide(),t.data?(this.messageService.successToast("User created successfully"),this.dialogRef.close("ok")):this.messageService.errorToast(t.errorMessage)}))})}updateUSerData(){this.modelData.data.departmentId=Number(this.modelData.data.departmentId),this.modelData.data.designationId=Number(this.modelData.data.designationId),this.modelData.data.userTypeId=Number(this.modelData.data.userTypeId),this.modelData.data.corporateOfficeId=Number(this.modelData.data.corporateOfficeId),this.modelData.data.regionalOfficeId=this.modelData.data.regionalOfficeId?Number(this.modelData.data.regionalOfficeId):null,this.modelData.data.siteOfficeId=this.modelData.data.siteOfficeId?Number(this.modelData.data.siteOfficeId):null,this.dialogRef1=this.dialog.open(f.z,{width:"24.514vw",height:"12.083vw",data:{header:"Save ?",data:{bodyData:"Are you sure, you want to update the changes?"},button:{isSubmit:!0,isCancel:!0,isDelete:!1}}}),this.dialogRef1.disableClose=!0,this.dialogRef1.afterClosed().subscribe(i=>{"ok"==i&&(this.spinner.show(),this.userManagementService.updateUsersData(this.modelData.data).subscribe(t=>{this.spinner.hide(),this.messageService.successToast("User updated successfully"),this.dialogRef.close("ok")}))})}getRegionalOffice(i){this.rigionalOfficeList=[],i&&(this.modelData.data.regionalOfficeId=null),("4"==this.modelData.data.userTypeId||"5"==this.modelData.data.userTypeId)&&this.userAccessMgt.getReginalOfficeList(this.modelData.data.corporateOfficeId).subscribe(t=>{t.data.length>0?this.rigionalOfficeList=t.data:(this.rigionalOfficeList=[],this.messageService.errorToast(t.errorMessage))})}getSiteOffice(i){this.siteOfficeList=[],i&&(this.modelData.data.siteOfficeId=null),"4"==this.modelData.data.userTypeId&&this.userAccessMgt.getSiteOfficeList(this.modelData.data.regionalOfficeId).subscribe(t=>{t.data.length>0?this.siteOfficeList=t.data:(this.siteOfficeList=[],this.messageService.errorToast("No Site Office found"))})}changeRole(){this.modelData.data.corporateOfficeId=null,this.modelData.data.regionalOfficeId=null,this.modelData.data.siteOfficeId=null,this.rigionalOfficeList=[],this.siteOfficeList=[]}confirmationDialog(){if(!this.selectedFiles?.length||0==this.selectedFiles?.length)return this.messageService.errorToast("Please select access type first");this.dialogRef1=this.dialog.open(f.z,{width:"24.514vw",height:"12.083vw",data:{header:"Save ?",data:{bodyData:"Are you sure, you want to submit the changes?"},button:{isSubmit:!0,isCancel:!0,isDelete:!1}}}),this.dialogRef1.disableClose=!0,this.dialogRef1.afterClosed().subscribe(i=>{"ok"==i&&this.showData()})}static#e=this.\u0275fac=function(t){return new(t||y)(e.Y36(m.so),e.Y36(w.t2),e.Y36(_.e),e.Y36(E.x),e.Y36(I.i),e.Y36(Q.t),e.Y36(m.uw),e.Y36(m.WI))};static#t=this.\u0275cmp=e.Xpm({type:y,selectors:[["app-add-user"]],decls:10,vars:6,consts:[[1,"container-fluid",3,"ngClass"],[1,"row"],[1,"col-12","py-2-vw","modelHeader","d-flex","justify-content-between"],[1,"px-2-vw"],[1,"fs-14-vw","fw-600"],[1,"px-2-vw",3,"click"],["src","../../../../assets/images/close-line.png","alt","","srcset","",1,"closeIcon"],["class","row px-4-vw pt-3-vw mb-3-vw",4,"ngIf"],["class","row height100 px-4-vw",4,"ngIf"],[1,"row","px-4-vw","pt-3-vw","mb-3-vw"],[1,"col-2"],["for","fileInput",1,"imageBorder","d-flex","align-items-center","justify-content-center"],["alt","","srcset","",3,"ngClass","src"],["type","file","id","fileInput","name","",3,"accept","change"],[1,"col-3","d-flex","align-items-end"],["for","",1,"fs-14-vw","fw-500"],["type","text","name","","id","","appAlphabetOnly","",1,"form-control","shadow-none","fs-14-vw","fw-400","py-1-vw",3,"disabled","ngModel","ngModelChange"],["type","text","name","","id","","appAlphaNumeric","",1,"w-100","form-control","shadow-none","fs-14-vw","fw-400","py-1-vw",3,"ngModel","ngModelChange"],[1,"col-4","d-flex","align-items-end"],[1,"w-100"],[1,"w-100","form-control","shadow-none","select-carot","fs-14-vw","fw-400","py-1-vw",2,"cursor","pointer",3,"ngModel","ngModelChange"],["value","null","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-6","mt-3-vw"],["type","email","name","","id","",1,"w-100","form-control","shadow-none","fs-14-vw","fw-400","py-1-vw",3,"disabled","ngModel","ngModelChange"],["type","text","name","","id","",1,"w-100","form-control","shadow-none","fs-14-vw","fw-400","py-1-vw",3,"disabled","ngModel","input","ngModelChange"],[1,"col-5","my-3-vw"],[1,"w-100","form-control","shadow-none","select-carot","fs-14-vw","fw-400","py-1-vw",2,"cursor","pointer",3,"disabled","ngModel","ngModelChange"],[1,"col-3","my-3-vw"],[1,"w-100","form-control","shadow-none","select-carot","fs-14-vw","fw-400","py-1-vw",2,"cursor","pointer",3,"ngModel","ngModelChange","change"],[1,"col-4","my-3-vw"],["class","col-4 my-3-vw",4,"ngIf"],[1,"col-4","d-flex","align-items-center",2,"padding-top","0.903vw"],["type","checkbox","id","userType","name","userType","value","true",2,"width","1.01vw","height","1.01vw","accent-color","#3a7688",3,"ngModel","ngModelChange"],["for","userType",1,"fs-14-vw","fw-500"],[1,"col-12","text-end","mt-3-vw"],[1,"cancelBtn","me-3-vw",3,"click"],[1,"submitButton",3,"click"],[3,"value"],[1,"row","height100","px-4-vw"],[1,"col-4","my-5-vw"],["type","text","placeholder","Name","disabled","","name","","id","",1,"w-100","form-control","shadow-none","fs-14-vw","fw-400","py-1-vw",3,"ngModel","ngModelChange"],["containerStyleClass","","display","comma","selectionMode","checkbox","placeholder","Select Item",1,"shadow-none","fs-14-vw","fw-400",3,"ngModel","options","metaKeySelection","scrollHeight","filter","appendTo","ngModelChange"],["pTemplate","default","class","shadow-none fs-14-vw fw-400"],["type","text","placeholder","Department","name","","id","","disabled","",1,"w-100","form-control","shadow-none","fs-14-vw","fw-400","py-1-vw",3,"ngModel","ngModelChange"],[1,"col-12","d-flex","align-items-end","justify-content-end"],[1,"cancelBtn","me-3-vw","fs-14-vw",3,"click"],["type","submit",1,"submitButton","fs-14-vw",3,"click"],[1,"shadow-none","fs-14-vw","fw-400"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"b",4),e._uU(5),e.qZA()(),e.TgZ(6,"div",5),e.NdJ("click",function(){return n.onCancel()}),e._UZ(7,"img",6),e.qZA()()(),e.YNc(8,pe,67,38,"div",7),e.YNc(9,ue,20,8,"div",8),e.qZA()),2&t&&(e.Q6J("ngClass",e.VKq(4,me,"Access"==n.modelData.tab)),e.xp6(5),e.Oqu(n.modelData.header),e.xp6(3),e.Q6J("ngIf","Access"!=n.modelData.tab),e.xp6(1),e.Q6J("ngIf","Access"==n.modelData.tab))},dependencies:[g.mk,g.sg,g.O5,d.YN,d.Kr,d.Fj,d.Wl,d.EJ,d.JJ,d.On,te.jx,ie.mP,S.A,j.m],styles:[".fs-12[_ngcontent-%COMP%]{font-size:12px!important}.fs-13[_ngcontent-%COMP%]{font-size:13px!important}.fs-14[_ngcontent-%COMP%]{font-size:14px!important}.fs-16[_ngcontent-%COMP%]{font-size:16px!important}.fs-20[_ngcontent-%COMP%]{font-size:20px!important}.fs-24[_ngcontent-%COMP%]{font-size:24px!important}.fw-400[_ngcontent-%COMP%]{font-weight:400!important}.fw-500[_ngcontent-%COMP%]{font-weight:500!important}.fw-600[_ngcontent-%COMP%]{font-weight:600!important}.blueColoredText[_ngcontent-%COMP%]{color:#015e89!important}.F7FAFC[_ngcontent-%COMP%]{background-color:#f7fafc}.cursor[_ngcontent-%COMP%]{cursor:pointer}.custom-error[_ngcontent-%COMP%]{border:1px solid red!important}.margin-0[_ngcontent-%COMP%]{margin:0}.D98E31[_ngcontent-%COMP%]{color:#d98e31}.custom-error[_ngcontent-%COMP%]{border:1px solid red}.select-carot[_ngcontent-%COMP%]{background-image:url(down_.svg)!important;background-size:contain!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.select-carot-small[_ngcontent-%COMP%]{background-image:url(down_.svg)!important;background-size:7%!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.select-carot-medium[_ngcontent-%COMP%]{background-image:url(down_.svg)!important;background-size:23%!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.disabledField[_ngcontent-%COMP%]{background-color:#e9ecef!important}.modelHeader[_ngcontent-%COMP%]{border-bottom:.139vw solid #e5e5e5}.height80[_ngcontent-%COMP%]{height:80%!important}.height100[_ngcontent-%COMP%]{height:100%!important}.imageBorder[_ngcontent-%COMP%]{border:.139vw solid #e5e5e5;border-style:dashed;height:6.944vw;width:10vw;cursor:pointer}.imageBorder[_ngcontent-%COMP%]   .imageUrl1[_ngcontent-%COMP%]{width:2.778vw;height:2.778vw}.imageBorder[_ngcontent-%COMP%]   .imageUrl[_ngcontent-%COMP%]{width:100%;height:100%}input[type=file][_ngcontent-%COMP%]{display:none}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{height:2.431vw}.closeIcon[_ngcontent-%COMP%]{cursor:pointer;width:1.667vw;height:1.667vw}.cancelBtn[_ngcontent-%COMP%]{color:#015e88;border:.139vw solid #015e88;background-color:#fff;width:7.639vw;height:2.639vw;border-radius:.347vw;font-size:.972vw}.submitButton[_ngcontent-%COMP%]{background:linear-gradient(89.16deg,#015e89 2.04%,#014144 98.95%);color:#fff;border:0;width:7.639vw;height:2.639vw;border-radius:.347vw;font-size:.972vw}.error[_ngcontent-%COMP%]{border:.069vw solid red} {font-size:.972vw!important;font-weight:300!important}  p-treeSelect{display:grid!important;width:100%;height:2.431vw;font-size:.972vw!important;font-weight:300!important}  p-treeSelect .p-treeselect{font-size:.972vw!important;font-weight:300!important;box-shadow:none!important}  p-treeSelect .p-treeselect .p-treeselect-label-container{width:9.028vw!important}  p-treeSelect .p-treeselect .p-treeselect-label-container .p-treeselect-label{padding:.486vw .833vw 0!important;font-size:.972vw!important;font-weight:400!important}  p-treeSelect .p-treeselect .p-element .p-overlay{position:fixed;min-width:100%}  p-treeSelect .p-treeselect .p-element .p-overlay .p-component{padding:0!important}  p-treeSelect .p-treeselect .p-element .p-overlay .p-component .p-tree-container{padding:0!important}  p-treeSelect .p-treeselect .p-treenode-content.p-highlight{background-color:#fff!important;color:#000!important}  .p-overlay{position:fixed!important;display:block!important}  .p-treeselect-panel .p-treeselect-items-wrapper p-tree .p-tree{padding-left:0!important}  .p-treeselect-panel .p-treeselect-items-wrapper p-tree .p-tree .p-tree-wrapper .p-tree-container{padding-left:0!important}  .p-treeselect-panel .p-treeselect-items-wrapper p-tree .p-tree .p-tree-wrapper .p-tree-container .p-treenode .p-treenode-content{padding:0!important}"]})}var D=c(553),R=c(9686),Z=c(1060);function he(s,i){if(1&s&&(e.TgZ(0,"th",19),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.Q6J("width",t.width),e.xp6(1),e.hij(" ",t.name," ")}}function fe(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"tr",20)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"label",21)(17,"input",22),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.isActive=a)})("change",function(a){const o=e.CHM(t),r=o.$implicit,l=o.index,p=e.oxw();return e.KtG(p.confirmationDialog(a,r,l))}),e.qZA(),e._UZ(18,"span",23),e.qZA()(),e.TgZ(19,"td")(20,"img",24),e.NdJ("click",function(){const o=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.openDialog("edit",o))}),e.qZA()()()}if(2&s){const t=i.$implicit,n=i.index,a=e.oxw();e.xp6(2),e.hij("",(a.currentPage-1)*a.pageSize+n+1,"."),e.xp6(2),e.hij(" ",(null==t.name?null:t.name.length)>8?(null==t||null==t.name?null:t.name.slice(0,8))+"...":t.name," "),e.xp6(2),e.hij(" ",(null==t.email?null:t.email.length)>17?(null==t||null==t.email?null:t.email.slice(0,17))+"...":t.email," "),e.xp6(2),e.hij(" ",null==t?null:t.mobile," "),e.xp6(2),e.Oqu(null==t?null:t.userType),e.xp6(2),e.hij(" ",(null==t.location?null:t.location.length)>23?(null==t||null==t.location?null:t.location.slice(0,23))+"...":t.location," "),e.xp6(2),e.hij(" ",null!=(null==t?null:t.isOutsideUser)&&null!=t&&t.isOutsideUser?"Yes":"No"," "),e.xp6(3),e.Q6J("ngModel",t.isActive)}}const _e=function(s,i){return{itemsPerPage:s,currentPage:i}};class L{constructor(i,t,n,a,o,r){this.dialog=i,this.spinner=t,this.messageService=n,this.userManagementService=a,this._dialog=o,this._commonData=r,this.userData={},this.pageSize=0,this.currentPage=0,this.Math=Math,this.tableHeaderArray=[{name:"S.No",width:"6%"},{name:"Name",width:"10%"},{name:"Email Address",width:"17%"},{name:"Contact No.",width:"13%"},{name:"Role",width:"12%"},{name:"Location",width:"19%"},{name:"Outside User",width:"9%"},{name:"Active/ InActive",width:"10%"},{name:"",width:"4%"}]}ngOnDestroy(){this.dialogRef&&this.dialogRef.close()}ngOnInit(){this.getUsersList(),this.userData=this.createUserDataFormat(""),this.pageSize=this._commonData.pageSize,this.currentPage=this._commonData.currentPage}createUserDataFormat(i){return{id:i?.id?i?.id:0,userId:i?.userId?i?.userId:0,firstName:i?.name?i?.name:"",middleName:"",lastName:"",emailId:i?.email?i?.email:"",phoneNumber:i?.mobile?i?.mobile:"",employeeId:i?.employeeId?i?.employeeId:"",locationId:i?.locationId?i?.locationId:null,userTypeId:i?.userTypeId?i?.userTypeId:0,designationId:i?.designationId?i?.designationId:0,departmentId:i?.departmentId?i?.departmentId:0,photo:i?.photo?D.N.apiHostName+"/"+i.photo:"",updatedPhoto:"",corporateOfficeId:i?.corporateOfficeId?i?.corporateOfficeId:null,regionalOfficeId:i?.regionalOfficeId?i?.regionalOfficeId:null,siteOfficeId:i?.siteOfficeId?i?.siteOfficeId:null,isOutsideUser:!!i?.isOutsideUser&&i?.isOutsideUser}}getUsersList(){this.dataSearch="",this.spinner.show(),this.userManagementService.getUsersList().subscribe(i=>{this.userList=i.data,this.userListLength=i.data.length,this.userDataList=i.data,this.spinner.hide()})}filterProducts(){this.currentPage=1,""!==this.dataSearch.trim()?(this.userList=this.userDataList?.filter(i=>{let t=i.isOutsideUser?"True":"False";return i?.name?.toLowerCase()?.includes(this.dataSearch.toLowerCase())?i?.name?.toLowerCase()?.includes(this.dataSearch.toLowerCase()):i?.email?.toLowerCase()?.includes(this.dataSearch.toLowerCase())?i?.email?.toLowerCase()?.includes(this.dataSearch.toLowerCase()):i?.mobile?.toLowerCase()?.includes(this.dataSearch.toLowerCase())?i?.mobile?.toLowerCase()?.includes(this.dataSearch.toLowerCase()):i?.userType?.toLowerCase()?.includes(this.dataSearch.toLowerCase())?i?.userType?.toLowerCase()?.includes(this.dataSearch.toLowerCase()):t?.toLowerCase()?.includes(this.dataSearch.toLowerCase())?t?.toLowerCase()?.includes(this.dataSearch.toLowerCase()):i?.location?.toLowerCase()?.includes(this.dataSearch.toLowerCase())}),this.userListLength=this.userList.length):(this.userList=this.userDataList,this.userListLength=this.userList.length)}openDialog(i,t){let n;n="edit"==i?this.createUserDataFormat(t):t,this.dialogRef=this.dialog.open(y,{width:"70%",data:{header:"edit"==i?"Edit User":"Add User",data:n,tab:"user"}}),this.dialogRef.disableClose=!0,this.dialogRef.afterClosed().subscribe(a=>{"ok"==a&&this.getUsersList(),this.userData=this.createUserDataFormat("")})}changeToggleData(i,t,n){this.spinner.show(),this.userManagementService.isUserActive(i.target.checked,t.email).subscribe(a=>{this.userList[n].isActive=i.target.checked,this.userDataList[n].isActive=i.target.checked,this.spinner.hide()},a=>{this.spinner.hide(),this.userList[n].isActive=!i.target.checked,this.userDataList[n].isActive=!i.target.checked})}confirmationDialog(i,t,n){const a=i.target.checked?"activate":"deactivate",o=i.target.checked?"Activate User":"Deactivate User";this.dialogRef1=this.dialog.open(f.z,{width:"24.514vw",height:"12.083vw",data:{header:o,data:{bodyData:`Are you sure you want to ${a} this user?`},button:{isSubmit:!0,isCancel:!0,isDelete:!1}}}),this.dialogRef1.disableClose=!0,this.dialogRef1.afterClosed().subscribe(r=>{"ok"==r?this.changeToggleData(i,t,n):t.isActive=!t.isActive})}pageChange(i){console.log(i)}static#e=this.\u0275fac=function(t){return new(t||L)(e.Y36(m.uw),e.Y36(w.t2),e.Y36(_.e),e.Y36(E.x),e.Y36(m.uw),e.Y36(R.t3))};static#t=this.\u0275cmp=e.Xpm({type:L,selectors:[["app-user-management"]],decls:31,vars:12,consts:[[1,"container-fluid"],["id","mainNavBar",1,"row","align-items-center"],[1,"col-8"],[1,"fs-16-vw"],[1,"col-4",2,"text-align","end"],[1,"addUserButton","fs-14-vw",3,"click"],[1,"row","pt-4-vw","px-3-vw","align-items-center"],[1,"col-5"],[1,"searchBar","d-flex","align-items-center","pe-2-vw"],["type","search","placeholder","Search","name","","id","",1,"form-control","selectedFontFamily","shadow-none","border-0","fs-14-vw","fw-500","blueColoredText",3,"ngModel","input","ngModelChange"],["src","../../../../assets/images/search_icon.svg","alt","",1,"src"],[1,"my-2-vw"],[1,"col-12"],[1,"table"],["scope","col","class","fs-13-vw fw-600",3,"width",4,"ngFor","ngForOf"],["class","fs-14-vw fw-500","style","word-break: break-all",4,"ngFor","ngForOf"],["colspan","9",1,"fs-14-vw","fw-500",2,"text-align","end"],[1,"d-flex","justify-content-between","align-items-center"],[3,"pageChange"],["scope","col",1,"fs-13-vw","fw-600",3,"width"],[1,"fs-14-vw","fw-500",2,"word-break","break-all"],[1,"switch"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"slider","round"],["src","../../../../assets/images/edit_icon.png","alt","","srcset","",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"b",3),e._uU(4,"User Management"),e.qZA()(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return n.openDialog("create",n.userData)}),e.TgZ(7,"b"),e._uU(8,"Add User"),e.qZA()()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8)(12,"input",9),e.NdJ("input",function(){return n.filterProducts()})("ngModelChange",function(o){return n.dataSearch=o}),e.qZA(),e._UZ(13,"img",10),e.qZA()(),e._UZ(14,"hr",11),e.TgZ(15,"div",12)(16,"table",13)(17,"thead")(18,"tr"),e.YNc(19,he,2,2,"th",14),e.qZA()(),e.TgZ(20,"tbody"),e.YNc(21,fe,21,8,"tr",15),e.ALo(22,"paginate"),e.qZA(),e.TgZ(23,"tfoot")(24,"tr")(25,"td",16)(26,"div",17)(27,"div"),e._uU(28),e.qZA(),e.TgZ(29,"div")(30,"pagination-controls",18),e.NdJ("pageChange",function(o){return n.currentPage=o}),e.qZA()()()()()()()()()()),2&t&&(e.xp6(12),e.Q6J("ngModel",n.dataSearch),e.xp6(7),e.Q6J("ngForOf",n.tableHeaderArray),e.xp6(2),e.Q6J("ngForOf",e.xi3(22,6,n.userList,e.WLB(9,_e,n.pageSize,n.currentPage))),e.xp6(7),e.lnq(" Showing ",(n.currentPage-1)*n.pageSize+1," - ",n.Math.min(n.currentPage*n.pageSize,n.userListLength)," out of ",n.userListLength," "))},dependencies:[g.sg,d.Fj,d.Wl,d.JJ,d.On,Z.LS,Z._s],styles:['.fs-12[_ngcontent-%COMP%]{font-size:12px!important}.fs-13[_ngcontent-%COMP%]{font-size:13px!important}.fs-14[_ngcontent-%COMP%]{font-size:14px!important}.fs-16[_ngcontent-%COMP%]{font-size:16px!important}.fs-20[_ngcontent-%COMP%]{font-size:20px!important}.fs-24[_ngcontent-%COMP%]{font-size:24px!important}.fw-400[_ngcontent-%COMP%]{font-weight:400!important}.fw-500[_ngcontent-%COMP%]{font-weight:500!important}.fw-600[_ngcontent-%COMP%]{font-weight:600!important}.blueColoredText[_ngcontent-%COMP%]{color:#015e89!important}.F7FAFC[_ngcontent-%COMP%]{background-color:#f7fafc}.cursor[_ngcontent-%COMP%]{cursor:pointer}.custom-error[_ngcontent-%COMP%]{border:1px solid red!important}.margin-0[_ngcontent-%COMP%]{margin:0}.D98E31[_ngcontent-%COMP%]{color:#d98e31}.custom-error[_ngcontent-%COMP%]{border:1px solid red}.select-carot[_ngcontent-%COMP%]{background-image:url(down_.svg)!important;background-size:contain!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.select-carot-small[_ngcontent-%COMP%]{background-image:url(down_.svg)!important;background-size:7%!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.select-carot-medium[_ngcontent-%COMP%]{background-image:url(down_.svg)!important;background-size:23%!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.disabledField[_ngcontent-%COMP%]{background-color:#e9ecef!important}#mainNavBar[_ngcontent-%COMP%]{background:linear-gradient(89.16deg,#015e89 2.04%,#014144 98.95%);height:4.722vw;color:#fff;font-weight:600;font-size:1.111vw!important}#mainNavBar[_ngcontent-%COMP%]   .addUserButton[_ngcontent-%COMP%]{background:#fff;color:#015e89;border:0;width:6.944vw;height:2.639vw;border-radius:.347vw}.searchBar[_ngcontent-%COMP%]{border:.069vw solid #015e89;border-radius:.278vw}.searchBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:22%}.searchBar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#015e89!important;opacity:1}#tableHeader[_ngcontent-%COMP%]{background:#ecf3f8}td[_ngcontent-%COMP%]   .no-line[_ngcontent-%COMP%]{border:none!important}td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:3.472vw;height:1.667vw}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#bcbcbc;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:1.181vw;width:1.181vw;left:.278vw;bottom:.278vw;background-color:#fff;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#03475e}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px linear-gradient(90deg,#03475e 0%,#014246 100%)}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(1.667vw)}.slider.round[_ngcontent-%COMP%]{border-radius:2.361vw}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}  .ngx-pagination .current{background-color:#015e89!important}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#8e8e8e}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#015e89;font-family:Montserrat!important}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd) > td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd) > th[_ngcontent-%COMP%]{background-color:#f7fafc!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding-left:2%}.fontsize[_ngcontent-%COMP%]{font-size:.972vw}.greyColor[_ngcontent-%COMP%]{color:#8e8e8e;font-size:.903vw}']})}function ve(s,i){if(1&s&&(e.TgZ(0,"th",16),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.Q6J("width",t.width),e.xp6(1),e.hij(" ",t.name," ")}}function Ce(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"img",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,o=e.oxw();return e.KtG(o.openDialog(a.id,"edit"))}),e.qZA()}2&s&&e.Q6J("width",20)}function we(s,i){if(1&s&&(e.TgZ(0,"tr",17)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.YNc(12,Ce,1,1,"img",18),e.qZA()()),2&s){const t=i.$implicit,n=i.index,a=e.oxw();e.xp6(2),e.hij("",(a.currentPage-1)*a.pageSize+n+1,"."),e.xp6(2),e.hij(" ",(null==t.name?null:t.name.length)>17?(null==t||null==t.name?null:t.name.slice(0,17))+"...":t.name," "),e.xp6(2),e.hij(" ",null==t?null:t.emailAddress," "),e.xp6(2),e.hij(" ",null==t?null:t.role," "),e.xp6(2),e.hij(" ","SuperAdmin"==(null==t?null:t.role)||"Admin"==(null==t?null:t.role)?"No Data Entry Access":(null==t.accessLevel?null:t.accessLevel.length)>50?(null==t||null==t.accessLevel?null:t.accessLevel.slice(0,50))+"...":t.accessLevel," "),e.xp6(2),e.Q6J("ngIf","SuperAdmin"!=t.role&&"Admin"!=t.role)}}const be=function(s,i){return{itemsPerPage:s,currentPage:i}};class x{constructor(i,t,n,a,o){this.dialog=i,this.userAccessmanagement=t,this.spinner=n,this.messageService=a,this._commonData=o,this.pageSize=this._commonData.pageSize,this.currentPage=this._commonData.currentPage,this.Math=Math,this.tableHeaderArray=[{name:"S.No",width:"5%"},{name:"Name",width:"15%"},{name:"Email Address",width:"20%"},{name:" Role",width:"15%"},{name:"Access Level",width:"37%"},{name:"",width:"5%"}]}ngOnInit(){this.getUsersAccessManagementList()}getUsersAccessManagementList(){this.dataSearch="",this.spinner.show(),this.userAccessmanagement.getUsersAccessManagementList().subscribe(i=>{this.userList=i.data,this.userListLength=i.data.length,this.userDataList=i.data,this.spinner.hide()})}filterProducts(){this.currentPage=1,""!==this.dataSearch?.trim()?(this.userList=this.userDataList?.filter(i=>i.name.toLowerCase().includes(this.dataSearch?.toLowerCase())?i.name.toLowerCase().includes(this.dataSearch?.toLowerCase()):i.emailAddress.toLowerCase().includes(this.dataSearch?.toLowerCase())?i.emailAddress.toLowerCase().includes(this.dataSearch?.toLowerCase()):i.accessLevel.toLowerCase().includes(this.dataSearch?.toLowerCase())?i.accessLevel.toLowerCase().includes(this.dataSearch?.toLowerCase()):i.role?.toLowerCase()?.includes(this.dataSearch?.toLowerCase())?i.role?.toLowerCase()?.includes(this.dataSearch?.toLowerCase()):i.location?.toLowerCase()?.includes(this.dataSearch.toLowerCase())),this.userListLength=this.userList?.length):(this.userList=this.userDataList,this.userListLength=this.userList?.length)}openDialog(i,t){const n=i,a=this.userList.find(o=>o.id===n);this.dialogRef=this.dialog.open(y,{width:"80%",height:"34.722vw",data:{header:"User Access",data:a,tab:"Access"}}),this.dialogRef.disableClose=!0,this.dialogRef.afterClosed().subscribe(o=>{"ok"==o&&this.getUsersAccessManagementList()})}static#e=this.\u0275fac=function(t){return new(t||x)(e.Y36(m.uw),e.Y36(Q.t),e.Y36(w.t2),e.Y36(_.e),e.Y36(R.t3))};static#t=this.\u0275cmp=e.Xpm({type:x,selectors:[["app-access-management"]],decls:27,vars:12,consts:[[1,"container-fluid"],["id","mainNavBar",1,"row","align-items-center"],[1,"col-8"],[1,"fs-16-vw"],[1,"row","pt-4-vw","px-3-vw"],[1,"col-5","mb-2-vw"],[1,"searchBar","d-flex","align-items-center","pe-2-vw"],["type","search","placeholder","Search","name","","id","",1,"form-control","selectedFontFamily","shadow-none","border-0","fs-14-vw","fw-500","blueColoredText",3,"ngModel","input","ngModelChange"],["src","../../../../assets/images/search_icon.svg","alt","",1,"src"],[1,"col-12"],[1,"table"],["scope","col","class","fs-13-vw fw-600",3,"width",4,"ngFor","ngForOf"],["class","fs-14-vw fw-500",4,"ngFor","ngForOf"],["colspan","8",1,"fs-14-vw","fw-500",2,"text-align","end"],[1,"d-flex","justify-content-between","align-items-center"],[3,"pageChange"],["scope","col",1,"fs-13-vw","fw-600",3,"width"],[1,"fs-14-vw","fw-500"],["src","../../../../assets/images/right_carot_icon.png","alt","","srcset","",3,"width","click",4,"ngIf"],["src","../../../../assets/images/right_carot_icon.png","alt","","srcset","",3,"width","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"b",3),e._uU(4,"Access Management"),e.qZA()()(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"input",7),e.NdJ("input",function(){return n.filterProducts()})("ngModelChange",function(o){return n.dataSearch=o}),e.qZA(),e._UZ(9,"img",8),e.qZA()(),e._UZ(10,"hr"),e.TgZ(11,"div",9)(12,"table",10)(13,"thead")(14,"tr"),e.YNc(15,ve,2,2,"th",11),e.qZA()(),e.TgZ(16,"tbody"),e.YNc(17,we,13,6,"tr",12),e.ALo(18,"paginate"),e.qZA(),e.TgZ(19,"tfoot")(20,"tr")(21,"td",13)(22,"div",14)(23,"div"),e._uU(24),e.qZA(),e.TgZ(25,"div")(26,"pagination-controls",15),e.NdJ("pageChange",function(o){return n.currentPage=o}),e.qZA()()()()()()()()()()),2&t&&(e.xp6(8),e.Q6J("ngModel",n.dataSearch),e.xp6(7),e.Q6J("ngForOf",n.tableHeaderArray),e.xp6(2),e.Q6J("ngForOf",e.xi3(18,6,n.userList,e.WLB(9,be,n.pageSize,n.currentPage))),e.xp6(7),e.lnq(" Showing ",(n.currentPage-1)*n.pageSize+1," - ",n.Math.min(n.currentPage*n.pageSize,n.userListLength)," out of ",n.userListLength," "))},dependencies:[g.sg,g.O5,d.Fj,d.JJ,d.On,Z.LS,Z._s],styles:[".fs-12[_ngcontent-%COMP%]{font-size:12px!important}.fs-13[_ngcontent-%COMP%]{font-size:13px!important}.fs-14[_ngcontent-%COMP%]{font-size:14px!important}.fs-16[_ngcontent-%COMP%]{font-size:16px!important}.fs-20[_ngcontent-%COMP%]{font-size:20px!important}.fs-24[_ngcontent-%COMP%]{font-size:24px!important}.fw-400[_ngcontent-%COMP%]{font-weight:400!important}.fw-500[_ngcontent-%COMP%]{font-weight:500!important}.fw-600[_ngcontent-%COMP%]{font-weight:600!important}.blueColoredText[_ngcontent-%COMP%]{color:#015e89!important}.F7FAFC[_ngcontent-%COMP%]{background-color:#f7fafc}.cursor[_ngcontent-%COMP%]{cursor:pointer}.custom-error[_ngcontent-%COMP%]{border:1px solid red!important}.margin-0[_ngcontent-%COMP%]{margin:0}.D98E31[_ngcontent-%COMP%]{color:#d98e31}.custom-error[_ngcontent-%COMP%]{border:1px solid red}.select-carot[_ngcontent-%COMP%]{background-image:url(down_.svg)!important;background-size:contain!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.select-carot-small[_ngcontent-%COMP%]{background-image:url(down_.svg)!important;background-size:7%!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.select-carot-medium[_ngcontent-%COMP%]{background-image:url(down_.svg)!important;background-size:23%!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.disabledField[_ngcontent-%COMP%]{background-color:#e9ecef!important}#mainNavBar[_ngcontent-%COMP%]{background:linear-gradient(89.16deg,#015e89 2.04%,#014144 98.95%);height:4.722vw;color:#fff;font-weight:600;font-size:1.111vw}.searchBar[_ngcontent-%COMP%]{border:.069vw solid #015e89;border-radius:.278vw}.searchBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:22%}.searchBar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#015e89!important;opacity:1}hr[_ngcontent-%COMP%]{border:.069vw solid #63666c}#tableHeader[_ngcontent-%COMP%]{background:#ecf3f8}img[_ngcontent-%COMP%]{cursor:pointer}  .ngx-pagination .current{background-color:#015e89!important}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#8e8e8e}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#015e89;font-family:Montserrat!important}.table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd) > td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd) > th[_ngcontent-%COMP%]{background-color:#f7fafc!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding-left:2%}.fontsize[_ngcontent-%COMP%]{font-size:.972vw}.greyColor[_ngcontent-%COMP%]{color:#8e8e8e;font-size:.903vw}"]})}var ye=c(6474),U=c(9877),B=c(655),H=c(1268),K=c(898),Y=c(6355),G=c(257);function De(s,i){if(1&s&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij("",null==t?null:t.department," ")}}function Oe(s,i){if(1&s&&(e.TgZ(0,"mat-option",32),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij("",null==t?null:t.designation," ")}}function Me(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"td",33)(1,"div")(2,"img",34),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,o=e.oxw();return e.KtG(o.confirmationDialog(a))}),e.qZA()()()}}const q=function(s){return{"custom-error":s}},$=function(s,i){return{"custom-error":s,disabledCaretIcon:i}},Te=function(){return["department"]},Ae=function(){return["designation"]};function Ie(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"tr",14)(1,"td",15)(2,"label",16)(3,"div",17),e._UZ(4,"img",18),e.qZA()(),e.TgZ(5,"input",19),e.NdJ("change",function(a){const r=e.CHM(t).index,l=e.oxw();return e.KtG(l.onSelectFiles(a,r))}),e.qZA()(),e.TgZ(6,"td",15),e._UZ(7,"input",20),e.qZA(),e.TgZ(8,"td",21)(9,"mat-form-field",22)(10,"mat-select",23)(11,"mat-option",24)(12,"lib-mat-select-search",25),e.NdJ("filtered",function(a){const r=e.CHM(t).index,l=e.oxw();return e.KtG(l.departmentList[r]=a)}),e.qZA()(),e.YNc(13,De,2,2,"mat-option",26),e.qZA()()(),e.TgZ(14,"td",15)(15,"mat-form-field",27)(16,"mat-select",28)(17,"mat-option",24)(18,"lib-mat-select-search",25),e.NdJ("filtered",function(a){const r=e.CHM(t).index,l=e.oxw();return e.KtG(l.designationList[r]=a)}),e.qZA()(),e.YNc(19,Oe,2,2,"mat-option",26),e.qZA()()(),e.TgZ(20,"td",15)(21,"input",29),e.NdJ("input",function(){const o=e.CHM(t).index,r=e.oxw();return e.KtG(r.userEmailInputUpdate.next(o))}),e.qZA()(),e.TgZ(22,"td",15)(23,"input",30),e.NdJ("input",function(){const o=e.CHM(t).index,r=e.oxw();return e.KtG(r.userMobileInputUpdate.next(o))})("input",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.onInputChange(a))}),e.qZA()(),e.YNc(24,Me,3,0,"td",31),e.qZA()}if(2&s){const t=i.$implicit,n=i.index,a=e.oxw();let o,r,l,p,A,u,ee;e.Q6J("formGroupName",n),e.xp6(2),e.Q6J("for","fileInput1"+(a.accordionId?a.accordionId+"_"+n:n)),e.xp6(2),e.Q6J("src",a.showImageUrl1[n]?a.showImageUrl1[n]:"https://icon-library.com/images/generic-user-icon/generic-user-icon-9.jpg",e.LSH),e.xp6(1),e.Q6J("disabled",a.apiData.isDisabled)("id","fileInput1"+(a.accordionId?a.accordionId+"_"+n:n)),e.xp6(2),e.Q6J("ngClass",e.VKq(19,q,null==(o=t.get("name"))?null:o.hasError("customError"))),e.xp6(2),e.Q6J("ngClass",e.WLB(21,$,null==(r=t.get("departmentId"))?null:r.hasError("customError"),a.apiData.isDisabled)),e.xp6(3),e.Q6J("list",null==a.apiData?null:a.apiData.departmentList)("searchProperties",e.DdM(24,Te)),e.xp6(1),e.Q6J("ngForOf",a.departmentList[n]),e.xp6(2),e.Q6J("ngClass",e.WLB(25,$,null==(l=t.get("designationId"))?null:l.hasError("customError"),a.apiData.isDisabled)),e.xp6(3),e.Q6J("list",null==a.apiData?null:a.apiData.designationList)("searchProperties",e.DdM(28,Ae)),e.xp6(1),e.Q6J("ngForOf",a.designationList[n]),e.xp6(2),e.Q6J("readOnly",a.apiData.isDisabled||(null==(p=t.get("id"))?null:p.value))("ngClass",e.VKq(29,q,null==(A=t.get("email"))?null:A.hasError("customError"))),e.xp6(2),e.Q6J("readOnly",a.apiData.isDisabled||(null==(u=t.get("id"))?null:u.value))("ngClass",e.VKq(31,q,null==(ee=t.get("mobile"))?null:ee.hasError("customError"))),e.xp6(1),e.Q6J("ngIf",!(null!=a.apiData&&a.apiData.isDisabled))}}class v{constructor(i,t,n,a,o,r){this.fb=i,this.organizationService=t,this.messageService=n,this.spinner=a,this.dialog=o,this.changeDetector=r,this.departmentList={},this.userTypeList=[],this.designationList={},this.rowImageSources={},this.showImageUrl1={},this.userEmailInputUpdate=new U.x,this.userMobileInputUpdate=new U.x,this.emailRegex=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,this.userEmailInputUpdate.pipe((0,B.b)(500)).subscribe(l=>{this.checkUniqueEmail(l)}),this.userMobileInputUpdate.pipe((0,B.b)(500)).subscribe(l=>{this.checkUniqueMobileNumber(l)})}ngOnInit(){this.contactData&&this.contactData?.length>0?(this.contactForm=this.fb.group({tableData:this.fb.array([])}),this.contactData.forEach((i,t)=>{this.addTableRow(i,t)})):(this.contactForm=this.fb.group({tableData:this.fb.array([this.createTableRow()])}),this.showImageUrl1[0]="",this.departmentList[0]=this.apiData?.departmentList,this.designationList[0]=this.apiData?.designationList)}ngAfterContentChecked(){this.changeDetector.detectChanges()}addTableRow(i,t){const n=this.createTableRow();i.photo?(this.rowImageSources[t]=D.N.apiHostName+"/"+i.photo,this.showImageUrl1[t]=D.N.apiHostName+"/"+i.photo):(this.rowImageSources[t]="",this.showImageUrl1[t]=""),n.patchValue(i),this.nameForms.push(n),this.departmentList[t]=this.apiData?.departmentList,this.designationList[t]=this.apiData?.designationList}createTableRow(){return this.fb.group({name:[{value:null,disabled:!!this.apiData?.isDisabled},d.kI.required],departmentId:[{value:null,disabled:!!this.apiData?.isDisabled},d.kI.required],roleId:null,designationId:[{value:null,disabled:!!this.apiData?.isDisabled},d.kI.required],email:[{value:"",disabled:!!this.apiData?.isDisabled},[d.kI.required,d.kI.pattern(this.emailRegex)]],mobile:[{value:"",disabled:!!this.apiData?.isDisabled},[d.kI.required,d.kI.pattern("^(?![0])[0-9]{10}$")]],photo:[""],updatedPhoto:[""],corporateOfficeId:this.corporateOfficeId?this.corporateOfficeId:0,regionalOfficeId:0,siteOfficeId:0,id:0})}onInputChange(i){const t=i.target.value;i.target.value=t.replace(/\D/g,"").slice(0,10)}trimSpace(i){const t=i.target.value;i.target.value=t.replace(/[^a-zA-Z\s]/g,"").trimStart()}get nameForms(){return this.contactForm.get("tableData")}addTableColumn(){this.spinner.show(),this.nameForms.push(this.createTableRow()),setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight+100),this.spinner.hide()},0)}getContactData(){return this.contactForm.get("tableData")}confirmationDialog(i){this.dialogRef=this.dialog.open(f.z,{width:"24.514vw",height:"12.083vw",data:{header:"Delete ?",data:{bodyData:"Are you sure, you want to Delete this contact data ?"},button:{isSubmit:!1,isCancel:!0,isDelete:!0}}}),this.dialogRef.disableClose=!0,this.dialogRef.afterClosed().subscribe(t=>{"ok"==t&&this.removeContactData(i)})}removeContactData(i){const n=this.contactForm.get("tableData").at(i);0!=n.value.id?(this.spinner.show(),this.organizationService.DeleteOfficeContactPerson(n.value.id).subscribe(a=>{this.nameForms.removeAt(i),this.rowImageSources[i]="",this.showImageUrl1[i]="",this.spinner.hide(),this.messageService.successToast("Contact detail deleted successfully.")})):(this.nameForms.removeAt(i),this.rowImageSources[i]="",this.showImageUrl1[i]="",this.messageService.successToast("Contact detail removed successfully."))}onSelectFiles(i,t){const n=i.target.files[0];if(n.size/1024>=51)return this.messageService.errorToast("Please upload an image less than 50KB");if(n){const o=new FileReader;o.onload=r=>{this.showImageUrl1[t]=r.target.result,this.imageUrl1=r.target.result;const p=this.contactForm.get("tableData").at(t);p&&(p.value.id>0?p.get("updatedPhoto").patchValue(r.target.result.split("base64,")[1]):p.get("photo").patchValue(r.target.result.split("base64,")[1]))},o.readAsDataURL(n)}}checkError(i){const t=this.contactForm.get("tableData");t.invalid&&this.markControlsAsTouched(t,i)}markControlsAsTouched(i,t){let a,o;i.controls.forEach((r,l,p)=>{Object.keys(r.controls).forEach(A=>{const u=r.get(A);u.markAsTouched(),u.invalid&&!u.value&&(a=!0),l<p?.length&&u.value&&u.invalid&&(o=!0),l==p?.length-1&&"mobile"==A&&t&&(a?this.messageService.errorToast("Please fill all required fields."):(o||u.invalid)&&this.messageService.errorToast("Invalid format.")),u.invalid&&u.setErrors({customError:!0})})})}checkUniqueEmail(i){this.spinner.show();const n=this.contactForm.get("tableData").at(i);let a={requestUserLoginName:JSON.parse(localStorage.getItem("userData")).username,requestId:"string",data:{email:n.value.email,levelType:this.apiData.levelType},message:"string"};this.organizationService.isEmailIsUnique(a).subscribe(o=>{o.data&&(n.get("email").setErrors({customError:!0}),this.messageService.errorToast("Email already registered.")),this.spinner.hide()})}checkUniqueMobileNumber(i){this.spinner.show();const n=this.contactForm.get("tableData").at(i);let a={requestUserLoginName:JSON.parse(localStorage.getItem("userData")).username,requestId:"string",data:{mobile:n.value.mobile,levelType:this.apiData.levelType},message:"string"};this.organizationService.isMobileIsUnique(a).subscribe(o=>{o.data&&(n.get("mobile").setErrors({customError:!0}),this.messageService.errorToast("Mobile number already registered.")),this.spinner.hide()})}static#e=this.\u0275fac=function(t){return new(t||v)(e.Y36(d.qu),e.Y36(I.i),e.Y36(_.e),e.Y36(w.t2),e.Y36(m.uw),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:v,selectors:[["app-contact-detail"]],inputs:{contactData:"contactData",corporateOfficeId:"corporateOfficeId",accordionId:"accordionId",apiData:"apiData",errorField:"errorField"},decls:21,vars:2,consts:[["id","mainDiv",1,"container-fluid"],[1,"row","d-flex","justify-content-center"],["autocomplete","off",1,"px-0",3,"formGroup"],["formArrayName","tableData"],[1,"table","mt-1-vw","mb-0"],[1,"table-child-container","fs-14-vw","fw-500"],["id","tableHeader"],["id","tableHeader","scope","col",2,"width","27.778vw"],["id","tableHeader","scope","col",2,"width","18.75vw"],["id","tableHeader","scope","col",2,"width","20.833vw"],["id","tableHeader","scope","col",2,"width","35.417vw"],["id","tableHeader","scope","col",2,"width","14.583vw"],["id","tableHeader","scope","col",2,"width","2.361vw"],["class","py-1-vw",3,"formGroupName",4,"ngFor","ngForOf"],[1,"py-1-vw",3,"formGroupName"],[1,"no-line","border-0"],[3,"for"],[1,"circular-image"],["id","imageCursor","alt","","srcset","",3,"src"],["type","file","accept","image/*","name","",3,"disabled","id","change"],["formControlName","name","placeholder","Name","type","text","name","","id","","appAlphabetOnly","",1,"w-100","form-control","shadow-none","ps-2-vw","pe-1-vw",3,"ngClass"],[1,"no-line","border-0","pe-0"],[1,"organizationContactsTable","border","selectedFontFamily","selectedFontWeight",2,"padding-right","0.069vw !important",3,"ngClass"],["placeholder","Select","formControlName","departmentId","panelWidth","24.306vw",1,"selectedFontFamily","fs-14-vw","fw-500","selectedFontWeight"],[1,"border"],[3,"list","searchProperties","filtered"],["class","fs-14-vw fw-400 selectedFontFamily selectedFontWeight",3,"value",4,"ngFor","ngForOf"],[1,"organizationContactsTable","border","selectedFontFamily","selectedFontWeight",3,"ngClass"],["placeholder","Select","formControlName","designationId","panelWidth","24.306vw",1,"selectedFontFamily","fs-14-vw","fw-500","selectedFontWeight"],["formControlName","email","placeholder","Email","type","text","name","","id","",1,"w-100","form-control","shadow-none","ps-2-vw","pe-1-vw",3,"readOnly","ngClass","input"],["formControlName","mobile","placeholder","Phone","type","text","name","","id","","maxlength","10",1,"w-100","form-control","shadow-none","ps-2-vw","pe-1-vw",3,"readOnly","ngClass","input"],["class","no-line border-0 py-3-vw",4,"ngIf"],[1,"fs-14-vw","fw-400","selectedFontFamily","selectedFontWeight",3,"value"],[1,"no-line","border-0","py-3-vw"],["src","../../../../assets/images/delete_icon2.png","alt","","srcset","",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"table",4)(5,"thead")(6,"tr",5),e._UZ(7,"th",6),e.TgZ(8,"th",7),e._uU(9,"Name"),e.qZA(),e.TgZ(10,"th",8),e._uU(11," Department "),e.qZA(),e.TgZ(12,"th",9),e._uU(13," Designation "),e.qZA(),e.TgZ(14,"th",10),e._uU(15," Email "),e.qZA(),e.TgZ(16,"th",11),e._uU(17," Contact No. "),e.qZA(),e._UZ(18,"th",12),e.qZA()(),e.TgZ(19,"tbody"),e.YNc(20,Ie,25,33,"tr",13),e.qZA()()()()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",n.contactForm),e.xp6(18),e.Q6J("ngForOf",null==n.nameForms?null:n.nameForms.controls))},dependencies:[g.mk,g.sg,g.O5,d._Y,d.Fj,d.JJ,d.JL,d.nD,d.sg,d.u,d.x0,d.CE,H.KE,K.nu,Y.gD,G.ey,S.A],styles:["#mainDiv[_ngcontent-%COMP%]{background-color:#f7fafc;border-radius:.417vw}#mainDiv[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], #mainDiv[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#fff;height:2.431vw;font-size:.972vw!important;font-weight:500!important}#mainDiv[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{cursor:pointer}#mainDiv[_ngcontent-%COMP%]   .circular-image[_ngcontent-%COMP%]{width:2.778vw;height:2.778vw;background-size:cover;background-position:center;border-radius:50%;overflow:hidden}#mainDiv[_ngcontent-%COMP%]   .circular-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}#mainDiv[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}#mainDiv[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}#mainDiv[_ngcontent-%COMP%]   #imageCursor[_ngcontent-%COMP%]{cursor:pointer}#mainDiv[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}#mainDiv[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, #mainDiv[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}#mainDiv[_ngcontent-%COMP%]   .custom-error[_ngcontent-%COMP%]{border:.069vw solid red}.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(caption){padding:.1rem,.1rem!important}.select-carot[_ngcontent-%COMP%]{background-image:url(down_.svg)!important;background-size:contain!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.organizationContactsTable[_ngcontent-%COMP%]{height:2.431vw!important;width:100%;border-radius:.208vw!important;display:grid!important;background-color:#fff!important;overflow:hidden!important}.organizationContactsTable[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background-color:#fff!important}.organizationContactsTable[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex{height:2.431vw!important}.organizationContactsTable[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-form-field-infix{padding-top:0!important;padding-bottom:0!important;min-height:2.431vw!important;height:2.431vw!important;display:flex;align-items:center!important}.organizationContactsTable[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-form-field-infix .mat-mdc-select{display:flex!important;align-items:center!important}.organizationContactsTable[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper .mdc-line-ripple{display:none!important}.organizationContactsTable[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.organizationContactsTable[_ngcontent-%COMP%]     .mat-mdc-select-disabled{color:#000!important;display:flex!important}.disabledCaretIcon[_ngcontent-%COMP%]     .mat-mdc-select-arrow-wrapper{display:none!important}.selectedFontWeight[_ngcontent-%COMP%]{font-weight:500!important;font-size:.972vw!important;min-height:2.361vw!important}"]})}var h=c(7198),k=c(2109),V=c(1923),Se=c(9761);const Ze=["mapContainer"];function Le(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",36)(1,"label",5),e._uU(2,"Office Name"),e.qZA(),e.TgZ(3,"input",37),e.NdJ("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeError("regionalOfficeName"))})("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.addressData.regionalOfficeName=a)}),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(3),e.ekj("error",null==t.errorField?null:t.errorField.regionalOfficeName),e.Q6J("ngModel",t.addressData.regionalOfficeName)("readOnly",t.apiData.isDisabled)}}function xe(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",36)(1,"label",5),e._uU(2,"Site Office Name"),e.qZA(),e.TgZ(3,"input",38),e.NdJ("input",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.trimSpace(a,"siteOffice"))})("ngModelChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeError("siteOffice"))})("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.addressData.siteOffice=a)}),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(3),e.ekj("error",null==t.errorField?null:t.errorField.siteOffice),e.Q6J("ngModel",t.addressData.siteOffice)("readOnly",t.apiData.isDisabled)}}function Ne(s,i){if(1&s&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",null==t?null:t.countryName," ")}}function Fe(s,i){if(1&s&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",null==t?null:t.stateName," ")}}function Pe(s,i){if(1&s&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",null==t?null:t.cityName," ")}}function Ue(s,i){if(1&s&&(e.TgZ(0,"div",16)(1,"label",5),e._uU(2,"Latitude, Longitude"),e.qZA(),e.TgZ(3,"div",40),e._uU(4),e.qZA()()),2&s){const t=e.oxw();e.xp6(4),e.AsE(" ",t.addressData.lat?t.addressData.lat+",":""," ",t.addressData.lon," ")}}function qe(s,i){if(1&s&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",null==t?null:t.projectType," ")}}function ke(s,i){if(1&s&&(e.TgZ(0,"mat-option",39),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij("",null==t?null:t.regionalOfficeName," ")}}const O=function(s){return{disabledCaretIcon:s}},Je=function(){return["projectType"]},ze=function(){return["regionalOfficeName"]};function Ee(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",1)(2,"div",41)(3,"label",5),e._uU(4,"Project Type"),e.qZA(),e.TgZ(5,"mat-form-field",15)(6,"mat-select",42),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.addressData.projectTypeId=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onInputChanged("projectTypeId",""))}),e.TgZ(7,"mat-option",12)(8,"lib-mat-select-search",13),e.NdJ("filtered",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.projectList=a)}),e.qZA()(),e.YNc(9,qe,2,2,"mat-option",14),e.qZA()()(),e.TgZ(10,"div",41)(11,"label",5),e._uU(12,"Installed Capacity"),e.qZA(),e.TgZ(13,"input",43),e.NdJ("input",function(a){e.CHM(t);const o=e.oxw();return o.onInputChanged("installedCapacity",""),e.KtG(o.trimSpace(a,"office"))})("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.addressData.installedCapacity=a)}),e.qZA()(),e.TgZ(14,"div",41)(15,"label",5),e._uU(16,"Associated Regional Office"),e.qZA(),e.TgZ(17,"mat-form-field",15)(18,"mat-select",42),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.addressData.regionalOfficeId=a)})("selectionChange",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onInputChanged("regionalOfficeId",""))}),e.TgZ(19,"mat-option",12)(20,"lib-mat-select-search",13),e.NdJ("filtered",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.regionalList=a)}),e.qZA()(),e.YNc(21,ke,2,2,"mat-option",14),e.qZA()()(),e.TgZ(22,"div",7)(23,"label",5),e._uU(24,"Description"),e.qZA(),e.TgZ(25,"textarea",44),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.addressData.detail=a)})("input",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.trimSpace(a,"office"))}),e._uU(26,"          "),e.qZA()()()()}if(2&s){const t=e.oxw();e.xp6(5),e.ekj("error",null==t.errorField?null:t.errorField.projectTypeId),e.Q6J("ngClass",e.VKq(22,O,t.apiData.isDisabled)),e.xp6(1),e.Q6J("disabled",t.apiData.isDisabled)("ngModel",t.addressData.projectTypeId),e.xp6(2),e.Q6J("list",null==t.apiData?null:t.apiData.projectList)("searchProperties",e.DdM(24,Je)),e.xp6(1),e.Q6J("ngForOf",t.projectList),e.xp6(4),e.ekj("error",null==t.errorField?null:t.errorField.installedCapacity),e.Q6J("ngModel",t.addressData.installedCapacity)("readOnly",t.apiData.isDisabled),e.xp6(4),e.ekj("error",null==t.errorField?null:t.errorField.regionalOfficeId),e.Q6J("ngClass",e.VKq(25,O,t.apiData.isDisabled)),e.xp6(1),e.Q6J("disabled",t.apiData.isDisabled)("ngModel",t.addressData.regionalOfficeId),e.xp6(2),e.Q6J("list",null==t.apiData?null:t.apiData.regionalList)("searchProperties",e.DdM(27,ze)),e.xp6(1),e.Q6J("ngForOf",t.regionalList),e.xp6(4),e.Q6J("ngModel",t.addressData.detail)("readOnly",t.apiData.isDisabled)}}const Qe=function(s){return{"pb-4-vw":s}},je=function(s){return{"mt-3-vw":s}},Re=function(){return["countryName"]},Be=function(){return["stateName"]},He=function(){return["cityName"]},Ke=function(){return{backdrop:"static"}};class C{constructor(i,t,n){this.commonService=i,this.messageService=t,this.changeDetector=n,this.selectStateCityId=new e.vpe,this.typingTimer=new U.x,this.mapInitialized=!1,this.currentMarker=null,this.countryList=[],this.stateList=[],this.cityList=[],this.regionalList=[],this.projectList=[]}ngOnInit(){this.countryList=this.apiData?.countryList,this.stateList=this.apiData?.stateList,this.cityList=this.apiData?.cityList,this.projectList=this.apiData?.projectList,this.regionalList=this.apiData?.regionalList,this.initializeMap(),this.typingTimer.pipe().subscribe(()=>{this.findLatLong()})}ngAfterContentChecked(){this.changeDetector.detectChanges()}onInputChanged(i,t){this.errorField&&this.errorField[i]&&(this.errorField[i]=!1),"city"==i&&"openModel"==this.addressData.city?(t.show(),this.addressData.city="",this.addressData.pin=null,this.changeDetector.detectChanges()):(("country"==i||"state"==i)&&(this.addressData.state="country"==i?"":this.addressData.state,this.addressData.city="",this.addressData.pin=null,this.typingTimer.next(""),this.selectCityStateName(i)),("city"==i||"pin"==i)&&(this.addressData.pin="city"==i?null:this.addressData.pin,this.typingTimer.next("")))}trimSpace(i,t){const n=i.target.value;i.target.value="address1"==t||"address2"==t?n.replace(/[^a-zA-Z0-9\s.&@/]/g,"").trimStart():n.replace(/[^a-zA-Z0-9\s]/g,"").trimStart()}removeError(i){this.errorField&&this.errorField[i]&&(this.errorField[i]=!1)}selectCityStateName(i){let t;t="country"==i?{type:i,id:Number(this.addressData.country)}:{type:i,id:Number(this.addressData.state)},this.selectStateCityId.emit(t)}pinCodeInput(i){const t=i.target.value;i.target.value=t.replace(/\D/g,"").slice(0,6),this.addressData.pin=t.replace(/\D/g,"").slice(0,6)}findLatLong(){let a,i="string"==typeof this.addressData.country?Number(this.addressData?.country):this.addressData.country,t="string"==typeof this.addressData.state?Number(this.addressData?.state):this.addressData.state,n="string"==typeof this.addressData.city?Number(this.addressData?.city):this.addressData.city;this.countrySelected=this.apiData?.countryList.find(o=>o.id===i),this.citySelected=this.apiData?.cityList?.find(o=>o.id===n),this.stateSelected=this.apiData?.stateList?.find(o=>o.id===t),a=this.citySelected?.cityName||this.stateSelected?.stateName||!this.countrySelected?.countryName||this.addressData.pin?10:4,this.commonService.searchAddress(this.citySelected?.cityName,this.stateSelected?.stateName,this.countrySelected?.countryName,this.addressData.pin).subscribe({next:o=>{o?.length>0?(this.addressData.lat=Number(o[0]?.lat),this.addressData.lon=Number(o[0]?.lon),this.map.setView([Number(o[0]?.lat),Number(o[0]?.lon)],a),this.showCoordinatesOnMap(Number(o[0]?.lat),Number(o[0]?.lon))):(this.messageService.errorToast("Please enter valid pin code."),this.addressData.pin=null,this.errorField={pin:!0})},error(o){console.log(o)},complete(){}})}initializeMap(){this.mapInitialized||setTimeout(()=>{if(this.mapContainer&&this.mapContainer.nativeElement&&!this.mapInitialized){this.mapInitialized=!0;const i="https://www.downloadclipart.net/svg/17471-map-pin-svg.svg",t=h.icon({iconUrl:i,iconSize:[50,41]});h.Marker.prototype.options.icon=t;const n=this.mapContainer.nativeElement;this.map=h.map(n,{center:[20.5937,78.9629],zoom:16,boxZoom:!1});const a=h.tileLayer("http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",{maxZoom:20,minZoom:1,subdomains:["mt0","mt1","mt2","mt3"]}).addTo(this.map);fetch("assets/india_state.json").then(o=>o.json()).then(o=>{h.geoJSON(o,{style:r=>({color:"white",weight:2,fillColor:this.commonService.indiaStateColor(r.properties.NAME_1),fillOpacity:.7})}).addTo(this.map)}),a.addTo(this.map),this.map.on("click",o=>{this.currentMarker&&this.map.removeLayer(this.currentMarker),this.addressData.lat=o?.latlng.lat,this.addressData.lon=o?.latlng.lng,this.showCoordinatesOnMap(o.latlng.lat,o.latlng.lng)})}},0)}showCoordinatesOnMap(i,t){this.currentMarker&&this.map.removeLayer(this.currentMarker),i>0&&t>0&&setTimeout(()=>{this.currentMarker=h?.marker([i,t],{title:`Lat: ${i}, Long: ${t}`})?.addTo(this.map),this.currentMarker.bindPopup(`Lat: ${i}, Long: ${t}`),this.map.setView([i,t],10)},0)}addMarker(i,t){this.map?h.marker([i,t]).addTo(this.map).bindPopup(`Lat: ${i}, Long: ${t}`):console.error("Map is not initialized. Cannot add marker.")}countryGeoLocationOnMap(){h.geoJSON({type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[77.837451,35.49401],[78.912269,34.321936],[78.811086,33.506198],[79.208892,32.994395],[79.176129,32.48378],[78.458446,32.618164],[78.738894,31.515906],[79.721367,30.882715],[81.111256,30.183481],[80.476721,29.729865],[80.088425,28.79447],[81.057203,28.416095],[82.192792,27.452614],[83.293259,27.364506],[84.23458,27.464614],[85.012676,26.422446],[86.024393,26.630985],[87.227472,26.397898],[88.060238,26.414615],[88.174804,26.810405],[88.043133,27.445819],[88.120441,27.876542],[88.730326,28.086865],[88.814248,27.299316],[88.835642,27.098966],[89.744528,26.719403],[90.373275,26.875724],[91.217512,26.808648],[92.033484,26.83831],[92.103711,27.452614],[91.696657,27.771742],[92.503119,27.896876],[93.413348,28.640629],[94.56599,29.277438],[95.404802,29.031717],[96.117679,29.452802],[96.586591,28.830979],[96.248833,28.411031],[97.327114,28.261583],[97.402561,27.882536],[97.051989,27.699059],[97.133999,27.083774],[96.419366,27.264589],[95.124768,26.573572],[95.155153,26.001307],[94.603249,25.162495],[94.552658,24.675238],[94.106742,23.850741],[93.325188,24.078556],[93.286327,23.043658],[93.060294,22.703111],[93.166128,22.27846],[92.672721,22.041239],[92.146035,23.627499],[91.869928,23.624346],[91.706475,22.985264],[91.158963,23.503527],[91.46773,24.072639],[91.915093,24.130414],[92.376201,24.976693],[91.799596,25.147431],[90.872211,25.132601],[89.920693,25.26975],[89.832481,25.965082],[89.355094,26.014407],[88.563049,26.446526],[88.209789,25.768066],[88.931554,25.238692],[88.306373,24.866079],[88.084422,24.501657],[88.69994,24.233715],[88.52977,23.631141],[88.876312,22.879146],[89.031961,22.055708],[88.888766,21.690588],[88.208497,21.703171],[86.975704,21.495562],[87.033169,20.743308],[86.499351,20.151638],[86.429206,19.876165],[85.060266,19.478579],[83.941006,18.302009],[83.189217,17.671221],[82.192792,17.016636],[82.191242,16.556664],[81.692719,16.310219],[80.791999,15.951972],[80.324896,15.899185],[80.025069,15.136415],[80.233273,13.835771],[80.286294,13.006261],[79.862547,12.056215],[79.857999,10.357275],[79.340512,10.308854],[78.885345,9.546136],[79.18972,9.216544],[78.277941,8.933047],[77.941165,8.252959],[77.539898,7.965535],[76.592979,8.899276],[76.130061,10.29963],[75.746467,11.308251],[75.396101,11.781245],[74.864816,12.741936],[74.616717,13.992583],[74.443859,14.617222],[73.534199,15.990652],[73.119909,17.92857],[72.820909,19.208234],[72.824475,20.419503],[72.630533,21.356009],[71.175273,20.757441],[70.470459,20.877331],[69.16413,22.089298],[69.644928,22.450775],[69.349597,22.84318],[68.176645,23.691965],[68.842599,24.359134],[71.04324,24.356524],[70.844699,25.215102],[70.282873,25.722229],[70.168927,26.491872],[69.514393,26.940966],[70.616496,27.989196],[71.777666,27.91318],[72.823752,28.961592],[73.450638,29.976413],[74.42138,30.979815],[74.405929,31.692639],[75.258642,32.271105],[74.451559,32.7649],[74.104294,33.441473],[73.749948,34.317699],[74.240203,34.748887],[75.75706,34.504923],[76.871722,34.653544],[77.837451,35.49401]]]}}]},{style:{color:"#ff7800",weight:2,opacity:.65}}).addTo(this.map)}showLatLong(i,t){i&&t&&this.showCoordinatesOnMap(i,t)}addCityInDatabase(i){let t="string"==typeof this.addressData.country?Number(this.addressData?.country):this.addressData.country,n="string"==typeof this.addressData.state?Number(this.addressData?.state):this.addressData.state;this.countrySelected=this.apiData?.countryList.find(a=>a.id===t),this.stateSelected=this.apiData?.stateList?.find(a=>a.id===n),this.commonService.searchAddress(this.newCityName,this.stateSelected?.stateName,this.countrySelected?.countryName,this.addressData.pin).subscribe(a=>{a.length>0||(this.messageService.errorToast("Please enter valid city name."),this.errorField={newCity:!0})})}static#e=this.\u0275fac=function(t){return new(t||C)(e.Y36(k.v),e.Y36(_.e),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:C,selectors:[["app-address"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ze,5),2&t){let a;e.iGM(a=e.CRH())&&(n.mapContainer=a.first)}},inputs:{addressData:"addressData",showExtraData:"showExtraData",apiData:"apiData",errorField:"errorField"},outputs:{selectStateCityId:"selectStateCityId"},decls:65,vars:62,consts:[["id","mainDiv",1,"container-fluid",3,"ngClass"],[1,"row"],[1,"col-6"],["class","col-12 mt-3-vw",4,"ngIf"],[1,"col-12","mt-2-vw",3,"ngClass"],["for","",1,"fs-14-vw","fw-600"],["type","text","name","","appAlphabetNumericWithSpecialCharacter","","id","","placeholder","Address Line 1",1,"w-100","form-control","shadow-none","fs-14-vw","fw-500",3,"ngModel","readOnly","ngModelChange"],[1,"col-12","mt-2-vw"],["type","text","name","","id","","placeholder","Address Line 2",1,"w-100","form-control","shadow-none","fs-14-vw","fs-500",3,"ngModel","readOnly","ngModelChange","input"],[1,"mt-2-vw",3,"ngClass"],[1,"w-100","organizationAddress","selectedFontFamily","fs-14-vw","fw-500",3,"ngClass"],["placeholder","Select","panelWidth","350px",1,"selectedFontFamily","fs-14-vw","fw-500",3,"disabled","ngModel","ngModelChange","selectionChange"],[1,"border"],[3,"list","searchProperties","filtered"],["class","selectedFontFamily selectedFontWeight",3,"value",4,"ngFor","ngForOf"],[1,"w-100","organizationAddress","selectedFontFamily",3,"ngClass"],[1,"col-6","mt-2-vw"],["type","text","name","","id","","placeholder","Enter PIN",1,"w-100","form-control","shadow-none","fs-13-vw","fw-500",3,"ngModel","readOnly","blur","ngModelChange"],["class","col-6 mt-2-vw",4,"ngIf"],[1,"col-6","d-flex","justify-content-center"],[1,"mt-2-vw","map-container",2,"position","sticky"],[2,"height","100%"],["mapContainer",""],["class","col-12 mt-2-vw",4,"ngIf"],[1,"col-12"],["bsModal","","role","dialog","aria-labelledby","dialog-static-name",1,"modal","fade",3,"config"],["cityModal","bs-modal"],[1,"modal-dialog","modal-md"],[1,"modal-content"],[1,"modal-body","my-3-vw"],[1,"d-flex","mb-3-vw","fw-bold",2,"color","#015e89"],["type","text","name","","id","","appAlphabetOnly","",1,"form-control","shadow-none","w-100","fs-14-vw",3,"ngModel","ngModelChange"],[1,"row","mt-3-vw"],[1,"col-12","d-flex","justify-content-end"],["id","cancelModalButton",1,"btn","cancelModalButton","me-3-vw",3,"click"],["id","saveModalButton",1,"btn","saveModalButton",3,"disabled","click"],[1,"col-12","mt-3-vw"],["type","text","name","","appAlphaNumeric","","id","","placeholder","Enter Office Name",1,"w-100","form-control","shadow-none","fs-14-vw","fw-500",3,"ngModel","readOnly","ngModelChange"],["type","text","name","","id","","placeholder","Enter Office Name",1,"w-100","form-control","shadow-none","fs-14-vw","fw-500",3,"ngModel","readOnly","input","ngModelChange"],[1,"selectedFontFamily","selectedFontWeight",3,"value"],[1,"w-100","form-control","height32","shadow-none","border-0","fs-13-vw","fw-500"],[1,"col-4","mt-2-vw"],["placeholder","Select",1,"selectedFontFamily","fs-14-vw","fw-500",3,"disabled","ngModel","ngModelChange","selectionChange"],["type","text","name","","id","","placeholder","Enter Installed Capacity",1,"w-100","form-control","shadow-none","fs-13-vw","fw-500",3,"ngModel","readOnly","input","ngModelChange"],["type","text","rows","2","name","","id","","placeholder","Enter Description",1,"w-100","form-control","shadow-none","border-0","fs-13-vw","fw-500",3,"ngModel","readOnly","ngModelChange","input"]],template:function(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1),e.YNc(4,Le,4,4,"div",3),e.YNc(5,xe,4,4,"div",3),e.TgZ(6,"div",4)(7,"label",5),e._uU(8,"Address Line 1"),e.qZA(),e.TgZ(9,"input",6),e.NdJ("ngModelChange",function(){return n.removeError("address1")})("ngModelChange",function(r){return n.addressData.address1=r}),e.qZA()(),e.TgZ(10,"div",7)(11,"label",5),e._uU(12,"Address Line 2"),e.qZA(),e.TgZ(13,"input",8),e.NdJ("ngModelChange",function(r){return n.addressData.address2=r})("input",function(r){return n.trimSpace(r,"address2")}),e.qZA()(),e.TgZ(14,"div",9)(15,"label",5),e._uU(16,"Country"),e.qZA(),e.TgZ(17,"mat-form-field",10)(18,"mat-select",11),e.NdJ("ngModelChange",function(r){return n.addressData.country=r})("selectionChange",function(){return n.onInputChanged("country","")}),e.TgZ(19,"mat-option",12)(20,"lib-mat-select-search",13),e.NdJ("filtered",function(r){return n.countryList=r}),e.qZA()(),e.YNc(21,Ne,2,2,"mat-option",14),e.qZA()()(),e.TgZ(22,"div",9)(23,"label",5),e._uU(24,"State"),e.qZA(),e.TgZ(25,"mat-form-field",15)(26,"mat-select",11),e.NdJ("ngModelChange",function(r){return n.addressData.state=r})("selectionChange",function(){return n.onInputChanged("state","")}),e.TgZ(27,"mat-option",12)(28,"lib-mat-select-search",13),e.NdJ("filtered",function(r){return n.stateList=r}),e.qZA()(),e.YNc(29,Fe,2,2,"mat-option",14),e.qZA()()(),e.TgZ(30,"div",9)(31,"label",5),e._uU(32,"City"),e.qZA(),e.TgZ(33,"mat-form-field",15)(34,"mat-select",11),e.NdJ("ngModelChange",function(r){return n.addressData.city=r})("selectionChange",function(){e.CHM(a);const r=e.MAs(50);return e.KtG(n.onInputChanged("city",r))}),e.TgZ(35,"mat-option",12)(36,"lib-mat-select-search",13),e.NdJ("filtered",function(r){return n.cityList=r}),e.qZA()(),e.YNc(37,Pe,2,2,"mat-option",14),e.qZA()()(),e.TgZ(38,"div",16)(39,"label",5),e._uU(40,"PIN Code"),e.qZA(),e.TgZ(41,"input",17),e.NdJ("blur",function(r){return n.onInputChanged("pin",""),n.pinCodeInput(r)})("ngModelChange",function(r){return n.addressData.pin=r}),e.qZA()(),e.YNc(42,Ue,5,2,"div",18),e.qZA()(),e.TgZ(43,"div",19)(44,"div",20),e._UZ(45,"div",21,22),e.qZA()(),e.YNc(47,Ee,27,28,"div",23),e.qZA(),e.TgZ(48,"div",24)(49,"div",25,26)(51,"div",27)(52,"div",28)(53,"div",29)(54,"div",1)(55,"div",24)(56,"h6",30),e._uU(57," Add New City "),e.qZA(),e.TgZ(58,"input",31),e.NdJ("ngModelChange",function(){return n.removeError("newCity")})("ngModelChange",function(r){return n.newCityName=r}),e.qZA(),e.TgZ(59,"div",32)(60,"div",33)(61,"button",34),e.NdJ("click",function(){return e.CHM(a),e.MAs(50).hide(),e.KtG(n.newCityName=void 0)}),e._uU(62," Cancel "),e.qZA(),e.TgZ(63,"button",35),e.NdJ("click",function(){e.CHM(a);const r=e.MAs(50);return e.KtG(n.addCityInDatabase(r))}),e._uU(64," Add "),e.qZA()()()()()()()()()()()}2&t&&(e.Q6J("ngClass",e.VKq(48,Qe,n.apiData.isRegionalOffice||n.showExtraData)),e.xp6(4),e.Q6J("ngIf",n.apiData.isRegionalOffice),e.xp6(1),e.Q6J("ngIf",n.showExtraData),e.xp6(1),e.Q6J("ngClass",e.VKq(50,je,!n.apiData.isRegionalOffice||!n.showExtraData)),e.xp6(3),e.ekj("error",null==n.errorField?null:n.errorField.address1),e.Q6J("ngModel",n.addressData.address1)("readOnly",n.apiData.isDisabled),e.xp6(4),e.Q6J("ngModel",n.addressData.address2)("readOnly",n.apiData.isDisabled),e.xp6(1),e.Q6J("ngClass",n.showExtraData?"col-4":"col-6"),e.xp6(3),e.ekj("error",null==n.errorField?null:n.errorField.country),e.Q6J("ngClass",e.VKq(52,O,n.apiData.isDisabled)),e.xp6(1),e.Q6J("disabled",n.apiData.isDisabled)("ngModel",n.addressData.country),e.xp6(2),e.Q6J("list",null==n.apiData?null:n.apiData.countryList)("searchProperties",e.DdM(54,Re)),e.xp6(1),e.Q6J("ngForOf",n.countryList),e.xp6(1),e.Q6J("ngClass",n.showExtraData?"col-4":"col-6"),e.xp6(3),e.ekj("error",null==n.errorField?null:n.errorField.state),e.Q6J("ngClass",e.VKq(55,O,n.apiData.isDisabled)),e.xp6(1),e.Q6J("disabled",n.apiData.isDisabled)("ngModel",n.addressData.state),e.xp6(2),e.Q6J("list",null==n.apiData?null:n.apiData.stateList)("searchProperties",e.DdM(57,Be)),e.xp6(1),e.Q6J("ngForOf",n.stateList),e.xp6(1),e.Q6J("ngClass",n.showExtraData?"col-4":"col-6"),e.xp6(3),e.ekj("error",null==n.errorField?null:n.errorField.city),e.Q6J("ngClass",e.VKq(58,O,n.apiData.isDisabled)),e.xp6(1),e.Q6J("disabled",n.apiData.isDisabled)("ngModel",n.addressData.city),e.xp6(2),e.Q6J("list",null==n.apiData?null:n.apiData.cityList)("searchProperties",e.DdM(60,He)),e.xp6(1),e.Q6J("ngForOf",n.cityList),e.xp6(4),e.ekj("error",null==n.errorField?null:n.errorField.pin),e.Q6J("ngModel",n.addressData.pin)("readOnly",n.apiData.isDisabled),e.xp6(1),e.Q6J("ngIf",n.showExtraData),e.xp6(5),e.Q6J("ngIf",n.showExtraData),e.xp6(2),e.Q6J("config",e.DdM(61,Ke)),e.xp6(9),e.ekj("error",null==n.errorField?null:n.errorField.newCity),e.Q6J("ngModel",n.newCityName),e.xp6(5),e.Q6J("disabled",!n.newCityName))},dependencies:[g.mk,g.sg,g.O5,d.Fj,d.JJ,d.On,H.KE,K.nu,Y.gD,G.ey,V.oB,S.A,j.m,Se.N],styles:[".fs-12[_ngcontent-%COMP%]{font-size:12px!important}.fs-13[_ngcontent-%COMP%]{font-size:13px!important}.fs-14[_ngcontent-%COMP%]{font-size:14px!important}.fs-16[_ngcontent-%COMP%]{font-size:16px!important}.fs-20[_ngcontent-%COMP%]{font-size:20px!important}.fs-24[_ngcontent-%COMP%]{font-size:24px!important}.fw-400[_ngcontent-%COMP%]{font-weight:400!important}.fw-500[_ngcontent-%COMP%]{font-weight:500!important}.fw-600[_ngcontent-%COMP%]{font-weight:600!important}.blueColoredText[_ngcontent-%COMP%]{color:#015e89!important}.F7FAFC[_ngcontent-%COMP%]{background-color:#f7fafc}.cursor[_ngcontent-%COMP%]{cursor:pointer}.custom-error[_ngcontent-%COMP%]{border:1px solid red!important}.margin-0[_ngcontent-%COMP%]{margin:0}.D98E31[_ngcontent-%COMP%]{color:#d98e31}.custom-error[_ngcontent-%COMP%]{border:1px solid red}.select-carot[_ngcontent-%COMP%]{background-image:url(down_.svg)!important;background-size:contain!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.select-carot-small[_ngcontent-%COMP%]{background-image:url(down_.svg)!important;background-size:7%!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.select-carot-medium[_ngcontent-%COMP%]{background-image:url(down_.svg)!important;background-size:23%!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.disabledField[_ngcontent-%COMP%]{background-color:#e9ecef!important}#mainDiv[_ngcontent-%COMP%]{background-color:#f7fafc;border-radius:.417vw}#mainDiv[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}#mainDiv[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#fff;border:0;font-size:.972vw!important}#mainDiv[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{background-color:#fff!important}#mainDiv[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]{width:98%;height:19.792vw;border:.139vw solid black}#mainDiv[_ngcontent-%COMP%]   .map-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}#mainDiv[_ngcontent-%COMP%]     .leaflet-right>.leaflet-control>a{display:none!important}#mainDiv[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{border:.069vw solid red!important}.organizationAddress[_ngcontent-%COMP%]{height:2.222vw!important;width:100%;border-radius:.208vw!important;display:grid!important;background-color:#fff!important;overflow:hidden!important}.organizationAddress[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background-color:#fff!important}.organizationAddress[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex{height:2.222vw!important}.organizationAddress[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-form-field-infix{padding-top:0!important;padding-bottom:0!important;min-height:2.222vw!important;height:2.222vw!important;display:flex;align-items:center!important}.organizationAddress[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper .mdc-line-ripple{display:none!important}.organizationAddress[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.organizationAddress[_ngcontent-%COMP%]     .mat-mdc-select-disabled{color:#000!important}.disabledCaretIcon[_ngcontent-%COMP%]     .mat-mdc-select-arrow-wrapper{display:none!important}.selectedFontWeight[_ngcontent-%COMP%]{font-weight:500!important;font-size:.972vw!important;min-height:2.361vw!important}.height32[_ngcontent-%COMP%]{height:2.222vw!important}"]})}class b{constructor(){}get sendDataToCreateOffice(){return this._sendDataToCreateOffice}set sendDataToCreateOffice(i){this._sendDataToCreateOffice=i}get previousTab(){return this._previousTab}set previousTab(i){this._previousTab=i}static#e=this.\u0275fac=function(t){return new(t||b)};static#t=this.\u0275prov=e.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}var Ye=c(268);function Ge(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"option",56),e._uU(2),e.qZA(),e.BQk()),2&s){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.department," ")}}function $e(s,i){if(1&s&&(e.ynx(0),e.YNc(1,Ge,3,2,"ng-container",55),e.BQk()),2&s){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",t.isActive)}}function Ve(s,i){if(1&s&&(e.TgZ(0,"option",57),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.frequencyName," ")}}function We(s,i){if(1&s&&(e.TgZ(0,"option",57),e._uU(1),e.qZA()),2&s){const t=i.$implicit;e.s9C("value",t.frequencyStartMonth),e.xp6(1),e.hij(" ",t.frequencyStartMonthName," ")}}function Xe(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"span",67),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.enableEdit())}),e._UZ(1,"img",68),e._uU(2," Edit"),e.qZA()}}const et=function(s,i,t,n,a){return{countryList:s,cityList:i,stateList:t,isRegionalOffice:n,isDisabled:a}};function tt(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"app-address",69),e.NdJ("selectStateCityId",function(a){e.CHM(t);const o=e.oxw(2);return e.KtG(o.getCityStateSelectedList(a))}),e.qZA()}if(2&s){const t=e.oxw(2);e.Q6J("apiData",e.qbA(4,et,t.countryList,t.cityList,t.stateList,t.button2,t.isCorporateDisabled))("errorField",t.errorFieldEnable)("showExtraData",t.button3)("addressData",t.addressData)}}function it(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"span",70),e.NdJ("click",function(){e.CHM(t),e.oxw();const a=e.MAs(12),o=e.oxw();return e.KtG(o.addNewAddressEntry(a))}),e._uU(1," + Add Row "),e.qZA()}}const nt=function(s,i,t,n){return{departmentList:s,userTypeList:i,designationList:t,levelType:1,isDisabled:n}};function at(s,i){if(1&s&&(e.TgZ(0,"div",58)(1,"p",59)(2,"b",60),e._uU(3,"Office Details \xa0 "),e.YNc(4,Xe,3,0,"span",61),e.qZA()(),e.YNc(5,tt,1,10,"app-address",62),e.TgZ(6,"p",63)(7,"b",9),e._uU(8,"Contact Person"),e.qZA(),e._uU(9," \xa0 "),e.YNc(10,it,2,0,"span",64),e.qZA(),e._UZ(11,"app-contact-detail",65,66),e.qZA()),2&s){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.isCorporateDisabled),e.xp6(1),e.Q6J("ngIf",t.button1),e.xp6(5),e.Q6J("ngIf",!t.isCorporateDisabled),e.xp6(1),e.Q6J("errorField",t.errorFieldEnable)("apiData",e.l5B(6,nt,t.departmentList,t.userTypeList,t.designationList,t.isCorporateDisabled))("contactData",t.contactData)}}function ot(s,i){1&s&&(e.TgZ(0,"p",79),e._uU(1," No Data Found "),e.qZA())}const st=function(s,i,t,n){return{countryList:s,cityList:i,stateList:t,isDisabled:!0,isRegionalOffice:n}};function rt(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"app-address",69,87),e.NdJ("selectStateCityId",function(a){e.CHM(t);const o=e.oxw(4);return e.KtG(o.getCityStateSelectedList(a))}),e.qZA()}if(2&s){const t=e.oxw(2).$implicit,n=e.oxw(2);e.Q6J("apiData",e.l5B(4,st,n.countryList,n.cityList,n.stateList,n.button2))("errorField",n.errorFieldEnable)("showExtraData",n.button3)("addressData",t.addressData)}}const W=function(s,i,t){return{departmentList:s,userTypeList:i,designationList:t,isDisabled:!0}};function dt(s,i){if(1&s&&(e.ynx(0),e.YNc(1,rt,2,9,"app-address",62),e.TgZ(2,"p",63)(3,"b",9),e._uU(4,"Contact Person"),e.qZA()(),e._UZ(5,"app-contact-detail",85,86),e.BQk()),2&s){const t=e.oxw(),n=t.index,a=t.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.isRegionalAccordionEnable[n]),e.xp6(4),e.Q6J("apiData",e.kEZ(5,W,o.departmentList,o.userTypeList,o.designationList))("accordionId","regionalSite"+n+1)("corporateOfficeId",o.corporateOfficeId)("contactData",a.contactData)}}function lt(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",80)(1,"h2",81)(2,"button",82),e.NdJ("click",function(){const a=e.CHM(t),o=a.$implicit,r=a.index,l=e.oxw(2);return e.KtG(l.regionalAccordion(o,r))}),e._uU(3),e.TgZ(4,"span",70),e.NdJ("click",function(a){const o=e.CHM(t),r=o.$implicit,l=o.index,p=e.oxw(2);return e.KtG(p.editAccordionData(a,!0,r.addressData,r.contactData,l))}),e._UZ(5,"img",68),e._uU(6," Edit"),e.qZA()()(),e.TgZ(7,"div",83)(8,"div",84),e.YNc(9,dt,7,9,"ng-container",55),e.qZA()()()}if(2&s){const t=i.$implicit,n=i.index,a=e.oxw(2);e.xp6(2),e.uIk("data-bs-target","#collapse"+n)("aria-controls","collapse"+n),e.xp6(1),e.hij(" ",null==t||null==t.addressData?null:t.addressData.regionalOfficeName,"\xa0 "),e.xp6(4),e.Q6J("id","collapse"+n),e.xp6(2),e.Q6J("ngIf",!a.isModalOpen&&a.isRegionalAccordionEnable[n])}}function ct(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",71)(1,"p",72)(2,"span",60),e._uU(3,"Regional Office"),e.qZA(),e.TgZ(4,"span")(5,"button",73),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sendDataToOfficeCreate(!1,null,null,""))}),e.TgZ(6,"span",74),e._uU(7,"Add Regional Office"),e.qZA()()()(),e.TgZ(8,"div",75)(9,"div",37),e.YNc(10,ot,2,0,"p",76),e.TgZ(11,"div",77),e.YNc(12,lt,10,5,"div",78),e.qZA()()()()}if(2&s){const t=e.oxw();e.xp6(10),e.Q6J("ngIf",0==t.regionalOfficeData.length),e.xp6(2),e.Q6J("ngForOf",t.regionalOfficeData)}}function pt(s,i){1&s&&(e.TgZ(0,"p",79),e._uU(1," No Data Found "),e.qZA())}const gt=function(s,i,t,n,a,o){return{countryList:s,cityList:i,stateList:t,regionalList:n,projectList:a,isDisabled:!0,isRegionalOffice:o}};function ut(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"app-address",99,100),e.NdJ("selectStateCityId",function(a){e.CHM(t);const o=e.oxw(5);return e.KtG(o.getCityStateSelectedList(a))}),e.qZA()}if(2&s){const t=e.oxw(3).$implicit,n=e.oxw(2);e.Q6J("errorField",n.errorFieldEnable)("apiData",e.HTZ(4,gt,n.countryList,n.cityList,n.stateList,n.regionalList,n.projectList,n.button2))("showExtraData",n.button3)("addressData",t.addressData)}}function mt(s,i){if(1&s&&(e.ynx(0),e.YNc(1,ut,2,11,"app-address",98),e.BQk()),2&s){const t=e.oxw(2).index,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isSiteAccordionOpen[t])}}function ht(s,i){if(1&s&&(e.TgZ(0,"div",96),e.YNc(1,mt,2,1,"ng-container",55),e.TgZ(2,"p",63)(3,"b",9),e._uU(4,"Contact Person"),e.qZA()(),e._UZ(5,"app-contact-detail",85,97),e.qZA()),2&s){const t=e.oxw(),n=t.index,a=t.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!o.isModalOpen),e.xp6(4),e.Q6J("apiData",e.kEZ(5,W,o.departmentList,o.userTypeList,o.designationList))("accordionId","officeSite"+n+1)("corporateOfficeId",o.corporateOfficeId)("contactData",a.contactData)}}function ft(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",80)(1,"h2",92)(2,"button",93),e.NdJ("click",function(){const a=e.CHM(t),o=a.$implicit,r=a.index,l=e.oxw(2);return e.KtG(l.siteAccordion(o,r))}),e._uU(3),e.TgZ(4,"span",70),e.NdJ("click",function(a){const o=e.CHM(t),r=o.$implicit,l=o.index,p=e.oxw(2);return e.KtG(p.editAccordionData(a,!0,r.addressData,r.contactData,l))}),e._UZ(5,"img",68),e._uU(6," Edit"),e.qZA()()(),e.TgZ(7,"div",94),e.YNc(8,ht,7,9,"div",95),e.qZA()()}if(2&s){const t=i.$implicit,n=i.index,a=e.oxw(2);e.xp6(1),e.Q6J("id","headingSite"+n),e.xp6(1),e.uIk("data-bs-target","#collapseSite1"+n)("aria-controls","collapseSite1"+n),e.xp6(1),e.hij(" ",null==t||null==t.addressData?null:t.addressData.siteOffice,"\xa0 "),e.xp6(4),e.Q6J("id","collapseSite1"+n),e.xp6(1),e.Q6J("ngIf",!a.isModalOpen)}}function _t(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",88)(1,"p",89)(2,"span",60),e._uU(3,"Site Offices"),e.qZA(),e.TgZ(4,"span")(5,"button",73),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sendDataToOfficeCreate(!1,null,null,""))}),e.TgZ(6,"span",90),e._uU(7,"Add Site Offices"),e.qZA()()()(),e.TgZ(8,"div",75)(9,"div",37),e.YNc(10,pt,2,0,"p",76),e.TgZ(11,"div",91),e.YNc(12,ft,9,6,"div",78),e.qZA()()()()}if(2&s){const t=e.oxw();e.xp6(10),e.Q6J("ngIf",0==t.siteOfficeData.length),e.xp6(2),e.Q6J("ngForOf",t.siteOfficeData)}}function vt(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",101)(1,"div",37)(2,"div",102)(3,"div",103)(4,"button",104),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.validateData("","",""))}),e._uU(5," Save "),e.qZA()()()()()}}const X=function(s){return{"select-carot":s}},J=function(s){return{active:s}},Ct=function(){return{backdrop:"static"}};class N{constructor(i,t,n,a,o,r,l,p){this.changeDetector=i,this.organizationService=t,this.commonService=n,this.storageService=a,this.messageService=o,this.spinner=r,this.route=l,this.dialog=p,this.button1=!0,this.selectedItems=[],this.dropdownSettings={singleSelection:!1,idField:"id",textField:"indstryType",selectAllText:"Select All",unSelectAllText:"Reset All",itemsShowLimit:2},this.addressData={address1:"",address2:"",city:"",state:"",country:"",pin:"",lon:"",lat:""},this.addressData2={address1:"",address2:"",regionalOfficeName:"",city:"",state:"",country:"",pin:"",lon:"",lat:""},this.addressData3={address1:"",address2:"",siteOffice:"",city:"",state:"",country:"",pin:"",lon:"",lat:"",installedCapacity:"",projectTypeId:void 0,detail:"",isActive:!0,regionalOfficeId:void 0},this.siteOfficeData=[],this.regionalOfficeData=[],this.departmentList=[],this.industryTypeList=[],this.frequencyList=[],this.reportingFrequencyStartMonth="",this.selectedItem2=[],this.countryList=[],this.stateList=[],this.cityList=[],this.designationList=[],this.isRegionalAccordionEnable={},this.isSiteAccordionOpen={},this.isCorporateDisabled=!1}ngOnInit(){this.getDepartmentList(),this.getIndustryTypeList(),this.getFrequency(),this.getCountryList(),this.getAllUserType(),this.getDesignationList(),this.storageService.previousTab&&("button2"==this.storageService.previousTab.button?(this.button1=!1,this.button2=!0):"button3"==this.storageService.previousTab.button&&(this.button1=!1,this.button3=!0),this.corporateOfficeId=this.storageService?.previousTab?.corporateOfficeId,this.tabChange("ts"),this.storageService.previousTab=null)}onSelectFile(i){const t=i.target.files[0];if(this.errorFieldEnable&&this.errorFieldEnable.image&&(this.errorFieldEnable.image=!1),t){if(t.size/1024>=51)return this.imageUrl=null,this.showLogoUrl=null,this.messageService.errorToast("Please upload image size less then 50kb");const a=new FileReader;a.onload=o=>{this.completeOrganizationData?.organizationName||this.completeOrganizationData?.logo?(this.showLogoUrl=o.target.result,this.updatedLogo=o.target.result,this.updateFinalData()):(this.imageUrl=o.target.result,this.showLogoUrl=o.target.result)},a.readAsDataURL(t)}}trimSpace(i){const t=i.target.value;i.target.value=t.replace(/[^a-zA-Z0-9\s]/g,"").trimStart()}trimSpaceModel(i){const t=i.target.value;i.target.value=t.replace(/[^a-zA-Z\s]/g,"").trimStart()}addNewAddressEntry(i){i.addTableColumn()}tabChange(i){this.isCorporateDisabled=!1,this.errorFieldEnable=null,this.regionalOfficeData=[],this.button1?(this.isRegionalAccordionEnable[this.previousRegionalIndex]=!1,this.isSiteAccordionOpen[this.previousSiteIndex]=!1,this.button1=!0,this.button2=!1,this.button3=!1,"UI"==i&&this.getOrganizedDetail(),setTimeout(()=>{this.addressComponent.ngOnInit(),("NaN"!=this.addressData.lat||"NaN"!=this.addressData.lon)&&this.addressComponent.showLatLong(this.addressData.lat,this.addressData.lon)},0)):this.button2?(this.getRegionalOfficeListById(),this.isRegionalAccordionEnable[this.previousRegionalIndex]=!1,this.isSiteAccordionOpen[this.previousSiteIndex]=!1,this.previousRegionalIndex=void 0,this.button1=!1,this.button2=!0,this.button3=!1):this.button3&&(this.isRegionalAccordionEnable[this.previousRegionalIndex]=!1,this.isSiteAccordionOpen[this.previousSiteIndex]=!1,this.previousSiteIndex=void 0,this.getSiteOffice(),this.button1=!1,this.button2=!1,this.button3=!0)}getPercentage(){this.spinner.show(),this.organizationService.getPercentage().subscribe(i=>{this.completeDataPercentage=i.data,this.spinner.hide()})}regionalAccordion(i,t){this.errorFieldEnable=null,this.previousRegionalIndex>=0?(this.isRegionalAccordionEnable[this.previousRegionalIndex]=!1,this.previousRegionalIndex=t):this.previousRegionalIndex=t,this.isRegionalAccordionEnable[t]=!this.isRegionalAccordionEnable[t],i.addressData.country&&this.getStateList(i.addressData.country),i.addressData.state&&this.getCityList(i.addressData.state),this.isRegionalAccordionEnable[t]&&setTimeout(()=>{("NaN"!=i.addressData.lat||"NaN"!=this.addressData.lon)&&this.addressComponent.showLatLong(i?.addressData?.lat,i?.addressData?.lon)},0)}siteAccordion(i,t){this.errorFieldEnable=null,this.previousSiteIndex>=0?(this.isSiteAccordionOpen[this.previousSiteIndex]=!1,this.previousSiteIndex=t):this.previousSiteIndex=t,this.isSiteAccordionOpen[t]=!this.isRegionalAccordionEnable[t],i.addressData.country&&this.getStateList(i.addressData.country),i.addressData.state&&this.getCityList(i.addressData.state),this.isSiteAccordionOpen[t]&&setTimeout(()=>{("NaN"!=i.addressData.lat||"NaN"!=this.addressData.lon)&&this.addressComponent.showLatLong(i?.addressData?.lat,i?.addressData?.lon)},0)}getCountryList(){this.countryList=[],this.commonService.getCountryList().subscribe({next:i=>{this.countryList=i.data,this.changeDetector.detectChanges()},error:i=>{console.log(i)},complete(){}})}getStateList(i){this.stateList=[],this.commonService.getStateList(i).subscribe({next:t=>{this.stateList=t.data,this.changeDetector.detectChanges()},error:t=>{console.log(t)},complete(){}})}getCityList(i){this.cityList=[],this.commonService.getCityList(i).subscribe({next:t=>{this.cityList=t.data,this.changeDetector.detectChanges()},error:t=>{console.log(t)},complete(){}})}getCityStateSelectedList(i){"country"==i.type?(this.stateList=[],this.cityList=[],this.addressData.state="",this.addressData.city="",this.addressData.pin="",this.getStateList(i.id)):(this.cityList=[],this.addressData.city="",this.addressData.pin="",this.getCityList(i.id))}getDepartmentList(){this.spinner.show(),this.departmentList=[],this.organizationService.getListOfDepartment().subscribe(i=>{this.departmentList=i.data,this.spinner.hide()})}getIndustryTypeList(){this.spinner.show(),this.organizationService.getListOfIndustryType().subscribe(i=>{this.industryTypeList=i.data.filter(t=>t.isActive),this.spinner.hide(),this.getOrganizedDetail()},i=>{this.getOrganizedDetail()})}getFrequency(){this.spinner.show(),this.organizationService.getAllReportingFrequency().subscribe(i=>{this.frequencyList=i.data,this.spinner.hide()})}getReportingPeriodById(i,t){(i?.target?.value||i)&&(this.spinner.show(),this.reportingPeriodList=[],"UI"==t&&(this.reportingFrequencyStartMonth=""),this.organizationService.getReportingFrequencyById(Number("UI"==t?i.target.value:i)).subscribe(n=>{this.reportingPeriodList=n.data,this.spinner.hide()}))}getAllUserType(){this.organizationService.getAllUserType().subscribe(i=>{this.userTypeList=i.data})}getDesignationList(){this.departmentList=[],this.organizationService.getDesignationList().subscribe(i=>{this.designationList=i.data})}submitFinalData(){this.selectedItem2=[],this.industryTypeList.forEach(t=>{const n={id:t.id,indstryType:t.indstryType};this.selectedItem2.push({id:0,corporateOfficeId:0,isActive:JSON.stringify(this.selectedItems.find(a=>a.id==t.id))==JSON.stringify(n),industryTypeId:t.id})}),this.spinner.show();let i={organizationName:this.organizationName,logo:this.imageUrl?.split("base64,")[1],addressLine1:this.addressData.address1,addressLine2:this.addressData.address2,countryId:Number(this.addressData.country),stateId:Number(this.addressData.state),cityId:Number(this.addressData.city),pinCode:this.addressData.pin,longitude:`${this.addressData.lon}`,latitude:`${this.addressData.lat}`,reportingFrequencyId:Number(this.reportingFrequencyId),dataCapturingFrequencyId:Number(this.reportingFrequencyId),reportingFrequencyStartMonth:Number(this.reportingFrequencyStartMonth),officeContactPeople:this.contactChildComponent.contactForm.value.tableData,corporateOfficeIndustryTypes:this.selectedItem2};this.organizationService.submitCorporateDetails(i).subscribe({next:t=>{this.messageService.successToast("Data submitted successFully"),this.getOrganizedDetail(),this.spinner.hide()}})}updateFinalData(){this.selectedItem2=[],this.industryTypeList.forEach(t=>{const n={id:t.id,indstryType:t.indstryType};this.selectedItem2.push({id:0,corporateOfficeId:0,isActive:JSON.stringify(this.selectedItems.find(a=>a.id==t.id))==JSON.stringify(n),industryTypeId:t.id})}),this.spinner.show();let i={id:this.corporateOfficeId,organizationName:this.organizationName,logo:this.completeOrganizationData?.logo?.includes("base64,")?this.completeOrganizationData?.logo?.split("base64,")[1]:this.completeOrganizationData?.logo,updatedLogo:this.updatedLogo?.includes("base64,")?this.updatedLogo?.split("base64,")[1]:this.updatedLogo,addressLine1:this.addressData.address1,addressLine2:this.addressData.address2,countryId:Number(this.addressData.country),stateId:Number(this.addressData.state),cityId:Number(this.addressData.city),pinCode:this.addressData.pin,longitude:`${this.addressData.lon}`,latitude:`${this.addressData.lat}`,reportingFrequencyId:Number(this.reportingFrequencyId),dataCapturingFrequencyId:Number(this.reportingFrequencyId),reportingFrequencyStartMonth:Number(this.reportingFrequencyStartMonth),officeContactPeople:this.contactData,corporateOfficeIndustryTypes:this.selectedItem2};this.organizationService.updateCorporateDetails(i).subscribe({next:t=>{this.messageService.successToast("Data update successFully"),this.getOrganizedDetail(),this.spinner.hide()},error:t=>{this.messageService.errorToast(t.error.errorMessage),this.spinner.hide()}})}getOrganizedDetail(){this.getPercentage(),this.spinner.show(),this.selectedItems=[],this.organizationService.getCorporateDetails().subscribe(i=>{var t=[];this.completeOrganizationData=i.data,i.data.countryId&&this.getStateList(i.data.countryId),i.data.stateId&&this.getCityList(i.data.stateId),i.data?.corporateOfficeIndustryTypes.forEach(n=>{this.industryTypeList.forEach(a=>{a.id==n.industryTypeId&&n.isActive&&(t.push({id:a.id,indstryType:a.indstryType}),this.selectedItems=t,this.isNameDisabled=!0)})}),this.isUpdateButtonEnable=!!i.data,this.contactData=i.data.officeContactPeople,this.organizationName=i.data.organizationName,this.reportingFrequencyId=i.data.dataCapturingFrequencyId,this.reportingFrequencyStartMonth=i.data.reportingFrequencyStartMonth,this.imageUrl=D.N.apiHostName+"/"+i?.data?.logo,i?.data?.logo&&localStorage.setItem("imageUrl",this.imageUrl),this.showLogoUrl=D.N.apiHostName+"/"+i?.data?.logo,this.addressData.address1=i.data.addressLine1,i.data.addressLine1&&(this.isCorporateDisabled=!0),this.addressData.address2=i.data.addressLine2,this.addressData.country=i.data.countryId,this.addressData.city=i.data.cityId,this.addressData.state=i.data.stateId,this.addressData.pin=i.data.pinCode,this.addressData.lon=i.data.longitude,this.addressData.lat=i.data.latitude,this.corporateOfficeId=i.data.id,this.getReportingPeriodById(i.data.reportingFrequencyStartMonth,"api"),this.changeDetector.detectChanges(),("NaN"!=i?.data?.latitude||"NaN"!=i?.data?.longitude)&&this.addressComponent?.showLatLong(i?.data?.latitude,i?.data?.longitude),this.contactChildComponent.ngOnInit()},i=>{this.isUpdateButtonEnable=!1})}getRegionalOfficeListById(){this.spinner.show(),this.regionalOfficeData=[],this.organizationService.getRegionalOfficeListById(this.corporateOfficeId).subscribe(i=>{this.isSiteTabEnable=!!i?.data,i?.data?.forEach(t=>{let n={id:t.id,regionalOfficeName:t.regionalOfficeName,address1:t.addressLine1,address2:t.addressLine2,country:t.countryId,state:t.stateId,city:t.cityId,pin:t.pinCode,lon:t.longitude,lat:t.latitude,detail:t.detail,isActive:t.isActive};this.regionalOfficeData.push({addressData:n,contactData:t.officeContactPeople})}),this.spinner.hide()})}getSiteOffice(){this.spinner.show(),this.siteOfficeData=[],this.getRegionalList(),this.organizationService.getSiteOfficeDetails(this.corporateOfficeId).subscribe(i=>{i.data.forEach(t=>{let n={id:t.id,regionalOfficeId:t.regionalOfficeId,address1:t.addressLine1,address2:t.addressLine2,country:t.countryId,state:t.stateId,city:t.cityId,pin:t.pinCode,lon:t.longitude,lat:t.latitude,detail:t.detail,isActive:t.isActive,corporateOfficeId:t.corporateOfficeId,installedCapacity:t.installedCapacity,projectTypeId:t.projectTypeId,siteOffice:t.siteOffice};this.siteOfficeData.push({addressData:n,contactData:t.officeContactPeople})}),this.spinner.hide()})}getRegionalList(){this.spinner.show(),this.getProjectList(),this.organizationService.getRegionalOfficeListById(this.corporateOfficeId).subscribe(i=>{this.regionalList=i.data,this.spinner.hide()})}getProjectList(){this.spinner.show(),this.organizationService.getProjectList().subscribe(i=>{this.projectList=i.data,this.spinner.hide()})}validateData(i,t,n){this.spinner.show();let a=this.addressData,o=this.contactChildComponent;!(this.button1&&!this.organizationName||this.button1&&0===this.selectedItems.length||this.button1&&!this.reportingFrequencyId||this.button1&&!this.reportingFrequencyStartMonth)&&a.address1&&a.country&&a.state&&a.city&&a.pin&&o.contactForm.valid?6!=a.pin.length?(this.messageService.errorToast("Please enter 6 digit pin code."),this.errorFieldEnable={pin:!0},this.spinner.hide()):(this.errorFieldEnable=null,this.spinner.hide(),this.confirmationDialog()):(this.errorFieldEnable={organizationName:!this.organizationName,industryType:0==this.selectedItems.length,dataCapturingFrequency:!this.reportingFrequencyId,startOfReportingPeriodMonth:!this.reportingFrequencyStartMonth,address1:!a.address1,country:!a.country,state:!a.state,city:!a.city,pin:!a.pin},this.organizationName&&0!=this.selectedItems.length&&this.reportingFrequencyId&&this.reportingFrequencyStartMonth&&a.address1&&a.country&&a.state&&a.city&&a.pin?o.checkError(!0):(this.messageService.errorToast("Please fill all required fields."),o.checkError(!1)),this.spinner.hide())}confirmationDialog(){this.dialogRef=this.dialog.open(f.z,{width:"24.514vw",height:"12.083vw",data:{header:"Save ?",data:{bodyData:"Are you sure, you want to submit the changes?"},button:{isSubmit:!0,isCancel:!0,isDelete:!1}}}),this.dialogRef.disableClose=!0,this.dialogRef.afterClosed().subscribe(i=>{"ok"==i&&this.submitFinalData()})}enableEdit(){this.selectedItem2=[],this.industryTypeList.forEach(i=>{const t={id:i.id,indstryType:i.indstryType};this.selectedItem2.push({id:0,corporateOfficeId:0,isActive:JSON.stringify(this.selectedItems.find(n=>n.id==i.id))==JSON.stringify(t),industryTypeId:i.id})}),this.sendDataToOfficeCreate(!0,this.addressData,this.contactData,0)}removeError(i){this.errorFieldEnable&&this.errorFieldEnable[i]&&(this.errorFieldEnable[i]=!1)}openDepartmentModel(i,t){"addDepartment"==i.target.value&&(t.show(),i.target.value=null),i.target.value=null}addDepartmentList(i){if(!this.newDepartmentName)return this.errorFieldEnable={newDepartmentName:!0},this.messageService.errorToast("Please enter department name");this.spinner.show();let t={id:0,department:this.newDepartmentName,isActive:!0};this.organizationService.addDepartment(t).subscribe(n=>{this.spinner.hide(),i.hide(),this.newDepartmentName=void 0,this.getDepartmentList()})}editAccordionData(i,t,n,a,o){this.spinner.show(),i.stopPropagation(),this.sendDataToOfficeCreate(t,n,a,o)}sendDataToOfficeCreate(i,t,n,a){this.spinner.show(),this.storageService.sendDataToCreateOffice={countryList:this.countryList,cityList:this.cityList,stateList:this.stateList,departmentList:this.departmentList,userTypeList:this.userTypeList,designationList:this.designationList,regionalList:this.regionalList,projectList:this.projectList,isEdit:i,isSiteOffice:this.button3,isRegionalOffice:this.button2,isCorporateOffice:this.button1,corporateOfficeId:this.corporateOfficeId,selectedItem:this.selectedItem2,reportingFrequencyId:Number(this.reportingFrequencyId),dataCapturingFrequencyId:Number(this.reportingFrequencyId),reportingFrequencyStartMonth:Number(this.reportingFrequencyStartMonth),organizationName:this.organizationName,logo:this.imageUrl?.includes("base64,")?this.imageUrl?.split("base64,")[1]:this.imageUrl,updatedLogo:this.updatedLogo?.includes("base64,")?this.updatedLogo?.split("base64,")[1]:this.updatedLogo,addressData:t||(this.button2?this.addressData2:this.addressData3),contactData:n||null,index:a},this.route.navigate(["office/create"]),this.spinner.hide()}static#e=this.\u0275fac=function(t){return new(t||N)(e.Y36(e.sBO),e.Y36(I.i),e.Y36(k.v),e.Y36(b),e.Y36(_.e),e.Y36(w.t2),e.Y36(P.F0),e.Y36(m.uw))};static#t=this.\u0275cmp=e.Xpm({type:N,selectors:[["app-setup"]],viewQuery:function(t,n){if(1&t&&(e.Gf(v,5),e.Gf(C,5)),2&t){let a;e.iGM(a=e.CRH())&&(n.contactChildComponent=a.first),e.iGM(a=e.CRH())&&(n.addressComponent=a.first)}},decls:96,vars:50,consts:[[1,"container-fluid"],[1,"row"],["id","mainNavBar",1,"col-12","px-4-vw"],[1,"row","ps-4-vw","pt-lg-3","pt-xl-4","pt-md-2","pt-2-vw"],[1,"col-6","text-white"],[1,"fs-20-vw","fw-600"],[1,"text-white","fs-14-vw","fw-500"],["id","circleOutDiv",1,"col-6","d-flex","justify-content-end","align-items-center"],[1,"circle","text-white"],[1,"fs-16-vw"],[1,"text-big","fw-600"],[1,"row","ps-3-vw","my-4-vw","my-md-2","my-lg-3","my-xl-4"],[1,"col-2"],[1,"outerCircle"],[1,"circular-container"],["for","fileInput"],[1,"circular-image"],["id","imageCursor","alt","","srcset","",3,"src"],["type","file","id","fileInput","accept","image/*","name","",3,"ngModelChange","change"],[1,"circleDiv"],["id","imageCursor","src","../../../../assets/images/camera_icon.png","alt","","srcset",""],["type","file","id","fileInput","name","",2,"display","none"],[1,"col-10"],["id","organizationFiled",1,"col-4","my-1-vw"],["for","",1,"w-100","text-white","py-1-vw","fs-14-vw","fw-600"],["type","text","name","","id","","placeholder","Enter name",1,"form-control","w-100","shadow-none","text-white","fs-13-vw","fw-600","inputHeight",3,"readOnly","ngModel","input","ngModelChange"],["id","organizationFiled",1,"custom-font-size",3,"disabled","placeholder","settings","data","ngModel","ngModelChange"],[1,"w-100","form-select","shadow-none","select-carot","fs-13-vw","fw-600","inputHeight","py-1-vw",2,"cursor","pointer",3,"change"],["value","null","selected","",2,"background-color","gray","color","#fff"],[4,"ngFor","ngForOf"],["value","addDepartment",2,"content","'+'","font-weight","bold","background-color","#fff","color","#015e89"],[1,"w-100","form-select","shadow-none","fs-13-vw","fw-600","inputHeight","py-1-vw",2,"cursor","pointer",3,"disabled","ngModel","ngClass","ngModelChange","change"],["value","undefined","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"w-100","form-select","shadow-none","fs-13-vw","fw-600","inputHeight","py-1-vw",2,"cursor","pointer",3,"disabled","ngModel","ngClass","ngModelChange"],["value","","selected","","disabled",""],[1,"row","mt-3-vw"],[1,"col-12"],[1,"btn","button","py-3-vw","fs-14-vw","fw-600",3,"ngClass","click"],[1,"btn","button","py-3-vw","fs-14-vw","fw-600",3,"disabled","ngClass","click"],[1,"row","px-4-vw"],["class","col-12 mt-3-vw pb-2-vw",4,"ngIf"],["class","col-12 mt-3-vw mb-5-vw pb-2-vw",4,"ngIf"],["class","col-12 mt-3-vw mb-5-vw pb-3-vw",4,"ngIf"],["bsModal","","role","dialog","aria-labelledby","dialog-static-name",1,"modal","fade",3,"config"],["departmentListModal","bs-modal"],[1,"modal-dialog","modal-md"],[1,"modal-content"],[1,"modal-body","my-3-vw"],[1,"d-flex","mb-3-vw","fw-bold","fs-16-vw","f-600",2,"color","#015e89"],["type","text","name","","id","","appAlphabetOnly","",1,"form-control","shadow-none","w-100",3,"ngModel","ngModelChange"],[1,"col-12","d-flex","justify-content-end"],["id","cancelModalButton",1,"btn","cancelModalButton","me-3-vw",3,"click"],["id","saveModalButton",1,"btn","saveModalButton",3,"click"],["id","saveButtonDiv","class","py-3-vw",4,"ngIf"],[4,"ngIf"],[2,"background-color","#fff","color","#015e89",3,"value"],[3,"value"],[1,"col-12","mt-3-vw","pb-2-vw"],[1,"mb-3-vw"],[1,"fs-16-vw","fw-600"],["class","blueColoredText fs-14-vw fw-600",3,"click",4,"ngIf"],[3,"apiData","errorField","showExtraData","addressData","selectStateCityId",4,"ngIf"],[1,"my-2-vw","ps-1-vw"],[3,"click",4,"ngIf"],[3,"errorField","apiData","contactData"],["corporateComponent",""],[1,"blueColoredText","fs-14-vw","fw-600",3,"click"],["src","../../../../assets/images/edit_icon.png","alt",""],[3,"apiData","errorField","showExtraData","addressData","selectStateCityId"],[3,"click"],[1,"col-12","mt-3-vw","mb-5-vw","pb-2-vw"],[1,"d-flex","justify-content-between","align-items-center","mb-3-vw"],[1,"py-1-vw",3,"click"],[1,"fs-14-vw","fw-600"],[1,"row","pb-2-vw"],["class","my-3-vw d-flex justify-content-center",4,"ngIf"],["id","accordionExample",1,"accordion","mb-3-vw"],["class","accordion-item border mb-3-vw",4,"ngFor","ngForOf"],[1,"my-3-vw","d-flex","justify-content-center"],[1,"accordion-item","border","mb-3-vw"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","aria-expanded","false","data-bs-parent","#accordionExample",1,"accordion-button","collapsed","shadow-none","fs-13-vw","fw-600","selectedFontFamily",3,"click"],["data-bs-parent","#accordionExample",1,"accordion-collapse","collapse","my-0",3,"id"],[1,"accordion-body","px-1-vw","pt-0"],[3,"apiData","accordionId","corporateOfficeId","contactData"],["contactComponents",""],["regionAddress",""],[1,"col-12","mt-3-vw","mb-5-vw","pb-3-vw"],[1,"d-flex","justify-content-between","mb-3-vw"],[1,"fs-13-vw","fw-600"],["id","accordionExample1",1,"accordion"],[1,"accordion-header",3,"id"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed","shadow-none","fs-13-vw","fw-600","selectedFontFamily",3,"click"],["data-bs-parent","#accordionExample1",1,"accordion-collapse","collapse","my-0",3,"id"],["class","accordion-body pt-0 px-1-vw",4,"ngIf"],[1,"accordion-body","pt-0","px-1-vw"],["siteContactComponent",""],[3,"errorField","apiData","showExtraData","addressData","selectStateCityId",4,"ngIf"],[3,"errorField","apiData","showExtraData","addressData","selectStateCityId"],["addressComponent+{{i}}",""],["id","saveButtonDiv",1,"py-3-vw"],[1,"d-flex","justify-content-end"],["isUpdateButtonEnable","",1,"col-2","d-flex","justify-content-center"],["type","button","id","saveModalButton",1,"btn","fs-16-vw",3,"click"]],template:function(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),e._uU(6,"Organization Setup"),e.qZA(),e.TgZ(7,"p",6),e._uU(8," Welcome to the Organization Setup! To ensure seamless functioning "),e._UZ(9,"br"),e._uU(10," and access to the services, please complete the setup process. "),e.qZA()(),e.TgZ(11,"div",7)(12,"div",8)(13,"span",9)(14,"b",10),e._uU(15),e.qZA(),e._uU(16,"% "),e._UZ(17,"br"),e._uU(18,"Complete "),e.qZA()()()(),e.TgZ(19,"div",11)(20,"div",12)(21,"div",13)(22,"div",14)(23,"label",15)(24,"div",16),e._UZ(25,"img",17),e.qZA()(),e.TgZ(26,"input",18),e.NdJ("ngModelChange",function(){return n.removeError("image")})("change",function(r){return n.onSelectFile(r)}),e.qZA()(),e.TgZ(27,"div",19)(28,"label",15),e._UZ(29,"img",20),e.qZA(),e._UZ(30,"input",21),e.qZA()()(),e.TgZ(31,"div",22)(32,"div",1)(33,"div",23)(34,"label",24),e._uU(35," Organization's Name "),e.qZA(),e.TgZ(36,"input",25),e.NdJ("input",function(r){return n.trimSpace(r)})("ngModelChange",function(r){return n.organizationName=r})("ngModelChange",function(){return n.removeError("organizationName")}),e.qZA()(),e.TgZ(37,"div",23)(38,"label",24),e._uU(39," Industry Type "),e.qZA(),e.TgZ(40,"ng-multiselect-dropdown",26),e.NdJ("ngModelChange",function(){return n.removeError("industryType")})("ngModelChange",function(r){return n.selectedItems=r}),e.qZA()(),e.TgZ(41,"div",23)(42,"label",24),e._uU(43," Department List "),e.qZA(),e.TgZ(44,"select",27),e.NdJ("change",function(r){e.CHM(a);const l=e.MAs(80);return e.KtG(n.openDepartmentModel(r,l))}),e.TgZ(45,"option",28),e._uU(46," Department List "),e.qZA(),e.YNc(47,$e,2,1,"ng-container",29),e.TgZ(48,"option",30),e._uU(49," Add Department "),e.TgZ(50,"span"),e._uU(51,"+"),e.qZA()()()(),e.TgZ(52,"div",23)(53,"label",24),e._uU(54," Data Capturing Frequency "),e.qZA(),e.TgZ(55,"select",31),e.NdJ("ngModelChange",function(){return n.removeError("reportingFrequencyId")})("change",function(r){return n.getReportingPeriodById(r,"UI")})("ngModelChange",function(r){return n.reportingFrequencyId=r}),e.TgZ(56,"option",32),e._uU(57," Please Choose "),e.qZA(),e.YNc(58,Ve,2,2,"option",33),e.qZA()(),e.TgZ(59,"div",23)(60,"label",24),e._uU(61," Start Of Reporting Period (Month) "),e.qZA(),e.TgZ(62,"select",34),e.NdJ("ngModelChange",function(){return n.removeError("startOfReportingPeriodMonth")})("ngModelChange",function(r){return n.reportingFrequencyStartMonth=r}),e.TgZ(63,"option",35),e._uU(64,"Please Choose"),e.qZA(),e.YNc(65,We,2,2,"option",33),e.qZA()()()()(),e.TgZ(66,"div",36)(67,"div",37)(68,"button",38),e.NdJ("click",function(){return n.button1=!0,n.button2=!1,n.button3=!1,n.tabChange("UI")}),e._uU(69," Corporate Office "),e.qZA(),e.TgZ(70,"button",39),e.NdJ("click",function(){return n.button1=!1,n.button2=!0,n.button3=!1,n.tabChange("UI")}),e._uU(71," Regional Office "),e.qZA(),e.TgZ(72,"button",39),e.NdJ("click",function(){return n.button1=!1,n.button2=!1,n.button3=!0,n.tabChange("UI")}),e._uU(73," Site Office "),e.qZA()()()()(),e.TgZ(74,"div",40),e.YNc(75,at,13,11,"div",41),e.YNc(76,ct,13,2,"div",42),e.YNc(77,_t,13,2,"div",43),e.qZA(),e.TgZ(78,"div",37)(79,"div",44,45)(81,"div",46)(82,"div",47)(83,"div",48)(84,"div",1)(85,"div",37)(86,"h6",49),e._uU(87," Add Department "),e.qZA(),e.TgZ(88,"input",50),e.NdJ("ngModelChange",function(){return n.removeError("newDepartmentName")})("ngModelChange",function(r){return n.newDepartmentName=r}),e.qZA(),e.TgZ(89,"div",36)(90,"div",51)(91,"button",52),e.NdJ("click",function(){return e.CHM(a),e.MAs(80).hide(),e.KtG(n.newDepartmentName=void 0)}),e._uU(92," Cancel "),e.qZA(),e.TgZ(93,"button",53),e.NdJ("click",function(){e.CHM(a);const r=e.MAs(80);return e.KtG(n.addDepartmentList(r))}),e._uU(94," Add "),e.qZA()()()()()()()()()()(),e.YNc(95,vt,6,0,"div",54)}2&t&&(e.xp6(15),e.Oqu(n.completeDataPercentage),e.xp6(10),e.Q6J("src",n.showLogoUrl?n.showLogoUrl:"https://icon-library.com/images/generic-user-icon/generic-user-icon-9.jpg",e.LSH),e.xp6(11),e.ekj("error",null==n.errorFieldEnable?null:n.errorFieldEnable.organizationName),e.Q6J("readOnly",null==n.completeOrganizationData?null:n.completeOrganizationData.organizationName)("ngModel",n.organizationName),e.xp6(4),e.ekj("error",null==n.errorFieldEnable?null:n.errorFieldEnable.industryType),e.Q6J("disabled",n.isNameDisabled)("placeholder","Select Industry")("settings",n.dropdownSettings)("data",n.industryTypeList)("ngModel",n.selectedItems),e.xp6(7),e.Q6J("ngForOf",n.departmentList),e.xp6(8),e.ekj("error",null==n.errorFieldEnable?null:n.errorFieldEnable.reportingFrequencyId),e.Q6J("disabled",null==n.completeOrganizationData?null:n.completeOrganizationData.dataCapturingFrequencyId)("ngModel",n.reportingFrequencyId)("ngClass",e.VKq(39,X,!(null!=n.completeOrganizationData&&n.completeOrganizationData.dataCapturingFrequencyId))),e.xp6(3),e.Q6J("ngForOf",n.frequencyList),e.xp6(4),e.ekj("error",null==n.errorFieldEnable?null:n.errorFieldEnable.startOfReportingPeriodMonth),e.Q6J("disabled",null==n.completeOrganizationData?null:n.completeOrganizationData.reportingFrequencyStartMonth)("ngModel",n.reportingFrequencyStartMonth)("ngClass",e.VKq(41,X,!(null!=n.completeOrganizationData&&n.completeOrganizationData.dataCapturingFrequencyId))),e.xp6(3),e.Q6J("ngForOf",n.reportingPeriodList),e.xp6(3),e.Q6J("ngClass",e.VKq(43,J,n.button1)),e.xp6(2),e.Q6J("disabled",!n.corporateOfficeId)("ngClass",e.VKq(45,J,n.button2)),e.xp6(2),e.Q6J("disabled",!n.corporateOfficeId)("ngClass",e.VKq(47,J,n.button3)),e.xp6(3),e.Q6J("ngIf",n.button1),e.xp6(1),e.Q6J("ngIf",n.button2),e.xp6(1),e.Q6J("ngIf",n.button3),e.xp6(2),e.Q6J("config",e.DdM(49,Ct)),e.xp6(9),e.ekj("error",null==n.errorFieldEnable?null:n.errorFieldEnable.newDepartmentName),e.Q6J("ngModel",n.newDepartmentName),e.xp6(7),e.Q6J("ngIf",n.button1&&!n.isCorporateDisabled))},dependencies:[g.mk,g.sg,g.O5,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.On,Ye.O,V.oB,S.A,C,v],styles:[".fs-12{font-size:12px!important}.fs-13{font-size:13px!important}.fs-14{font-size:14px!important}.fs-16{font-size:16px!important}.fs-20{font-size:20px!important}.fs-24{font-size:24px!important}.fw-400{font-weight:400!important}.fw-500{font-weight:500!important}.fw-600{font-weight:600!important}.blueColoredText{color:#015e89!important}.F7FAFC{background-color:#f7fafc}.cursor{cursor:pointer}.custom-error{border:1px solid red!important}.margin-0{margin:0}.D98E31{color:#d98e31}.custom-error{border:1px solid red}.select-carot{background-image:url(down_.svg)!important;background-size:contain!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.select-carot-small{background-image:url(down_.svg)!important;background-size:7%!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.select-carot-medium{background-image:url(down_.svg)!important;background-size:23%!important;background-repeat:no-repeat!important;background-position:right center!important;padding-right:2.083vw!important}.disabledField{background-color:#e9ecef!important}#mainNavBar{background:linear-gradient(to right,#01587c 0%,#01444a 100%)}#mainNavBar ::placeholder{color:#fff}#mainNavBar #organizationFiled input,#mainNavBar #organizationFiled select{background:#347589;border:0;color:#fff;width:80%;height:2.361vw}#mainNavBar .dropdown-btn{background:#347589;border:0}#mainNavBar .dropdown-btn span{color:#fff}#mainNavBar #circleOutDiv{padding-right:6%}#mainNavBar #circleOutDiv .circle{width:6.597vw;height:6.597vw;text-align:center;display:flex;justify-content:center;align-items:center;border:.347vw solid #c0d0d2;border-radius:50%}#mainNavBar .outerCircle{position:relative}#mainNavBar .outerCircle .circleDiv{cursor:pointer;background-color:#43c079;height:2.569vw;width:2.639vw;display:flex;justify-content:center;align-items:center;border-radius:50%;position:relative;left:6.319vw;bottom:2.639vw}#mainNavBar .outerCircle .circleDiv img{width:100%!important;height:100%!important}#mainNavBar .inputHeight{height:2.222vw!important}#mainNavBar input[type=file]{display:none}#mainNavBar #imageCursor{cursor:pointer}#mainNavBar .circular-container{width:9.028vw;height:9.028vw;border-radius:50%;overflow:hidden;position:relative}#mainNavBar .circular-container label{width:100%;height:100%}#mainNavBar .circular-container .circular-image{width:100%;height:100%;background-size:cover;background-position:center}#mainNavBar .circular-container .circular-image img{width:100%!important;height:100%!important}#mainNavBar .button{cursor:pointer;width:11.111vw!important;height:100%;text-align:center;border-radius:.347vw .347vw 0 0;color:#fff;border:0}#mainNavBar .button.active{background-color:#fff;color:#000}#saveButtonDiv{position:sticky;bottom:0;left:0;width:100%;background-color:#fff;display:flex;justify-content:flex-end}#saveButtonDiv .btn-color{background:linear-gradient(to right,#3f85a5 0%,#01444a 100%);color:#fff;width:6.944vw;border-radius:.139vw;height:2.361vw}p{color:#3f85a5}p span{cursor:pointer}p span button{border:.139vw solid #3f85a5;color:#3f85a5;background:transparent;height:2.431vw!important;display:flex;align-items:center!important}.accordion-header button{color:#015e89!important;font-weight:600}.accordion-header button span{font-weight:500}.accordion-button:not(.collapsed){background:#fff!important}#saveModalButton{background:linear-gradient(to right,#3f85a5 0%,#01444a 100%);width:7.639vw;color:#fff;font-weight:500;height:2.569vw}#cancelModalButton{background:#fff;width:7.639vw;color:#3f85a5;border:.069vw solid #3f85a5;font-weight:500;height:2.569vw}.custom-font-size .multiselect-dropdown{height:2.361vw!important}.custom-font-size .multiselect-dropdown .dropdown-btn{height:2.361vw!important;padding-top:.278vw!important;padding-bottom:.278vw!important;display:flex!important}.custom-font-size .multiselect-dropdown .dropdown-btn .selected-item-container .selected-item{max-width:48.611vw!important;background-color:#5b9bb8!important;border:.069vw solid #3f85a5!important;border-radius:1.042vw!important;padding:.069vw .347vw!important;font-weight:600!important;font-size:.903vw!important}.custom-font-size .multiselect-dropdown .dropdown-btn .selected-item-container .selected-item:hover{box-shadow:none!important}.custom-font-size .multiselect-dropdown .dropdown-btn .selected-item-container .selected-item a{display:none!important}.custom-font-size .multiselect-dropdown .dropdown-btn span:nth-last-child(1){font-size:.903vw!important;padding-right:.278vw!important;text-align:end!important;flex:auto!important;display:flex;align-items:center;justify-content:end}.custom-font-size .multiselect-dropdown .dropdown-btn span:nth-last-child(1) span:nth-child(1){padding-right:1.042vw!important}.custom-font-size .multiselect-dropdown .dropdown-btn span:nth-last-child(1) .dropdown-multiselect__caret{line-height:3.472vw!important;width:2.778vw!important;padding:.278vw .556vw!important;right:.069vw!important;height:100%!important}.custom-font-size .multiselect-dropdown .dropdown-btn span:nth-last-child(1) .dropdown-multiselect__caret:before{top:0!important;border-width:.556vw .556vw 0 .556vw!important}.custom-font-size .multiselect-dropdown .dropdown-list .item1 li{padding:.694vw!important;font-size:.903vw!important}.custom-font-size .multiselect-dropdown .dropdown-list .item2{max-height:13.681vw!important}.custom-font-size .multiselect-dropdown .dropdown-list .item2 li{padding:.417vw .694vw!important;font-size:.903vw!important}.error,.error .multiselect-dropdown{border:.069vw solid red!important}.isError{border:.208vw solid red!important}\n"],encapsulation:2})}function wt(s,i){1&s&&(e.TgZ(0,"span"),e._uU(1,"Add "),e.qZA())}function bt(s,i){1&s&&(e.TgZ(0,"span"),e._uU(1,"Edit "),e.qZA())}function yt(s,i){1&s&&(e.TgZ(0,"span"),e._uU(1,"Regional "),e.qZA())}function Dt(s,i){1&s&&(e.TgZ(0,"span"),e._uU(1,"Site"),e.qZA())}function Ot(s,i){1&s&&(e.TgZ(0,"span"),e._uU(1,"Corporate"),e.qZA())}function Mt(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.confirmationDialog("delete","",""))}),e._UZ(2,"img",24),e._uU(3," Delete "),e.qZA()()}}const Tt=function(s,i,t,n,a,o){return{countryList:s,cityList:i,stateList:t,regionalList:n,projectList:a,isRegionalOffice:o}},At=function(s,i,t,n){return{departmentList:s,userTypeList:i,designationList:t,levelType:n}};class M{constructor(i,t,n,a,o,r,l){this.storageService=i,this.organizationService=t,this.spinner=n,this.messageService=a,this.route=o,this.commonService=r,this.dialog=l,this.addressData={regionalOfficeName:"",siteOffice:"",address1:"",address2:"",city:"",state:"",country:"",pin:"",lon:"",lat:""}}ngOnInit(){window.scrollTo(0,0),this.storageService.sendDataToCreateOffice?(this.apiData=this.storageService.sendDataToCreateOffice,this.corporateOfficeId=this.storageService.sendDataToCreateOffice?.corporateOfficeId,this.addressData=this.apiData.addressData,this.contactData=this.apiData.contactData?this.apiData.contactData:this.contactData,this.addressData.country&&this.getStateList(this.addressData.country),this.addressData.state&&this.getCityList(this.addressData.state),this.addressData.lat&&this.addressData.lon&&setTimeout(()=>{("NaN"!=this.addressData.lat||"NaN"!=this.addressData.lon)&&this.addressComponent.showLatLong(this.addressData?.lat,this.addressData?.lon)},0)):this.route.navigate(["/setup"]),this.getCountryList()}addNewAddressEntry(i){i.addTableColumn()}getCountryList(){this.spinner.show(),this.commonService.getCountryList().subscribe({next:i=>{this.countryList=i.data,this.spinner.hide()},complete(){}})}getStateList(i){this.spinner.show(),this.commonService.getStateList(i).subscribe({next:t=>{this.stateList=t.data,this.spinner.hide()},complete(){}})}getCityList(i){this.spinner.show(),this.commonService.getCityList(i).subscribe({next:t=>{this.cityList=t.data,this.spinner.hide()},complete(){}})}getCityStateSelectedList(i){"country"==i.type?(this.addressData.pin="",this.addressData.city="",this.addressData.state="",this.cityList=[],this.stateList=[],this.getStateList(i.id)):(this.addressData.pin="",this.addressData.city="",this.cityList=[],this.getCityList(i.id))}validateData(i){this.spinner.show();let t=this.addressData,n=i;(this.apiData.isCorporateOffice||this.apiData.isSiteOffice||t?.regionalOfficeName)&&t.address1&&t.country&&t.state&&t.city&&t.pin&&n.contactForm.valid&&(!this.apiData.isSiteOffice||t.siteOffice&&t.projectTypeId&&t.regionalOfficeId&&t.installedCapacity)?6!=t.pin.length?(this.messageService.errorToast("Please enter 6 digit pin code."),this.errorFieldEnable={pin:!0},this.spinner.hide()):(this.errorFieldEnable=null,this.spinner.hide(),this.confirmationDialog("submit",t,n)):(this.errorFieldEnable={address1:!t.address1,country:!t.country,state:!t.state,city:!t.city,pin:!t.pin,regionalOfficeName:!this.apiData.isSiteOffice&&!t?.regionalOfficeName,projectTypeId:!(!this.apiData.isSiteOffice||t.projectTypeId),installedCapacity:!(!this.apiData.isSiteOffice||t.installedCapacity),regionalOfficeId:!(!this.apiData.isSiteOffice||t.regionalOfficeId),siteOffice:!(!this.apiData.isSiteOffice||t?.siteOffice)},(this.apiData.isCorporateOffice||this.apiData.isSiteOffice||t?.regionalOfficeName)&&t.address1&&t.country&&t.state&&t.city&&t.pin&&(!this.apiData.isSiteOffice||t.siteOffice&&t.projectTypeId&&t.installedCapacity&&t.regionalOfficeId)?n.checkError(!0):(this.messageService.errorToast("Please fill all required fields."),n.checkError(!1)),this.spinner.hide())}submitRegionalData(i,t){let n=t.getContactData();this.spinner.show();let a={regionalOfficeName:i.regionalOfficeName,croporateOfficeId:this.corporateOfficeId,addressLine1:i.address1,addressLine2:i.address2,countryId:Number(i.country),stateId:Number(i.state),cityId:Number(i.city),pinCode:i.pin,longitude:`${i.lon}`,latitude:`${i.lat}`,isActive:!0,officeContactPeople:n.value};this.organizationService.submitRegionalDetails(a).subscribe({next:o=>{this.messageService.successToast(`${i.regionalOfficeName} created successfully`),this.renderToSite()}})}updateRegionalData(i,t){let n=t.getContactData();this.spinner.show();let a={regionalOfficeName:i.regionalOfficeName,id:i.id,croporateOfficeId:this.corporateOfficeId,addressLine1:i.address1,addressLine2:i.address2,countryId:Number(i.country),stateId:Number(i.state),cityId:Number(i.city),pinCode:i.pin,longitude:`${i.lon}`,latitude:`${i.lat}`,isActive:i.isActive,officeContactPeople:n.value};this.organizationService.updateRegionalDetails(a).subscribe({next:o=>{this.messageService.successToast(`${i.regionalOfficeName} updated successfully`),this.renderToSite()}})}deleteRegionalOffice(){this.spinner.show(),this.organizationService.deleteRegionalDetails(this.addressData.id).subscribe(i=>{this.spinner.hide(),this.messageService.successToast(`${this.addressData.regionalOfficeName} deleted successfully`),this.renderToSite()})}submitSiteOfficeData(i,t){let n=t.getContactData();this.spinner.show();let a={corporateOfficeId:this.corporateOfficeId,regionalOfficeId:i.regionalOfficeId,siteOffice:i.siteOffice,addressLine1:i.address1,addressLine2:i.address2,countryId:Number(i.country),stateId:Number(i.state),cityId:Number(i.city),pinCode:i.pin,latitude:`${i.lat}`,longitude:`${i.lon}`,detail:i.detail,isActive:!0,installedCapacity:i.installedCapacity,projectTypeId:i.projectTypeId,officeContactPeople:n.value};this.organizationService.submitSiteOfficeDetails(a).subscribe(o=>{this.messageService.successToast(`${i.siteOffice} created successfully`),this.renderToSite()})}updateSiteData(i,t){let n=t.getContactData();this.spinner.show();let a={id:i.id,corporateOfficeId:this.corporateOfficeId,regionalOfficeId:i.regionalOfficeId,siteOffice:i.siteOffice,detail:i.detail,installedCapacity:i.installedCapacity,projectTypeId:i.projectTypeId,regionalOfficeName:i.regionalOfficeName,addressLine1:i.address1,addressLine2:i.address2,countryId:Number(i.country),stateId:Number(i.state),cityId:Number(i.city),pinCode:i.pin,longitude:`${i.lon}`,latitude:`${i.lat}`,isActive:i.isActive,officeContactPeople:n.value};this.organizationService.updateSiteOfficeDetails(a).subscribe(o=>{this.messageService.successToast(`${i.siteOffice} updated successfully`),this.renderToSite()})}deleteSiteOffice(){this.spinner.show(),this.organizationService.deleteSiteOffice(this.addressData.id).subscribe(i=>{this.messageService.successToast(`${this.addressData.siteOffice} deleted successfully`),this.renderToSite()})}renderToSite(){this.storageService.sendDataToCreateOffice=null,this.storageService.previousTab={button:this.apiData.isCorporateOffice?"button1":this.apiData.isSiteOffice?"button3":"button2",corporateOfficeId:this.corporateOfficeId},this.route.navigate(["/setup"]),this.spinner.hide()}confirmationDialog(i,t,n){this.dialogRef=this.dialog.open(f.z,{width:"24.514vw",height:"12.083vw",data:{header:"submit"==i?"Save ?":"Delete ?",data:{bodyData:"submit"==i?"Are you sure, you want to submit the changes?":`Are you sure, you want to Delete this ${this.apiData?.isSiteOffice?"Site":"Regional"} Office ?`},button:{isSubmit:"submit"==i,isCancel:!0,isDelete:"delete"==i}}}),this.dialogRef.disableClose=!0,this.dialogRef.afterClosed().subscribe(a=>{"ok"==a&&("submit"==i?this.apiData.isEdit?this.apiData?.isCorporateOffice||this.apiData?.isSiteOffice?this.apiData?.isSiteOffice?this.updateSiteData(t,n):this.updateOrganizationData():this.updateRegionalData(t,n):this.apiData?.isSiteOffice?this.submitSiteOfficeData(t,n):this.submitRegionalData(t,n):this.apiData?.isSiteOffice?this.deleteSiteOffice():this.deleteRegionalOffice())})}updateOrganizationData(){this.spinner.show();let i={id:this.corporateOfficeId,organizationName:this.apiData?.organizationName,logo:this.apiData.logo,updatedLogo:this.apiData?.updatedLogo,addressLine1:this.addressData.address1,addressLine2:this.addressData.address2,countryId:Number(this.addressData.country),stateId:Number(this.addressData.state),cityId:Number(this.addressData.city),pinCode:this.addressData.pin,longitude:`${this.addressData.lon}`,latitude:`${this.addressData.lat}`,reportingFrequencyId:this.apiData?.reportingFrequencyId,dataCapturingFrequencyId:this.apiData?.reportingFrequencyId,reportingFrequencyStartMonth:this.apiData?.reportingFrequencyStartMonth,officeContactPeople:this.contactChildComponent.contactForm.value.tableData,corporateOfficeIndustryTypes:this.apiData?.selectedItem};this.organizationService.updateCorporateDetails(i).subscribe({next:t=>{this.messageService.successToast("Data update successFully"),this.renderToSite(),this.spinner.hide()}})}static#e=this.\u0275fac=function(t){return new(t||M)(e.Y36(b),e.Y36(I.i),e.Y36(w.t2),e.Y36(_.e),e.Y36(P.F0),e.Y36(k.v),e.Y36(m.uw))};static#t=this.\u0275cmp=e.Xpm({type:M,selectors:[["app-office-create"]],viewQuery:function(t,n){if(1&t&&(e.Gf(v,5),e.Gf(C,5)),2&t){let a;e.iGM(a=e.CRH())&&(n.contactChildComponent=a.first),e.iGM(a=e.CRH())&&(n.addressComponent=a.first)}},decls:35,vars:26,consts:[[1,"container-fluid"],[1,"row"],["id","mainNavBar",1,"col-12","px-4-vw"],[1,"row","d-flex","justify-content-between","ps-4-vw","py-4-vw"],[1,"col-4","d-flex","align-items-center","text-white"],[1,"fs-16-vw"],[4,"ngIf"],["class","col-2 d-flex align-items-center text-white",4,"ngIf"],[1,"row","pt-2-vw","px-3-2"],[1,"col-12","mt-3-vw","pb-2-vw"],[1,"mb-1-vw"],[3,"apiData","errorField","showExtraData","addressData","selectStateCityId"],[1,"my-2-vw"],[1,"fs-16-vw",3,"click"],[3,"errorField","apiData","corporateOfficeId","contactData"],["corporateComponent",""],["id","saveButtonDiv",1,"py-3-vw"],[1,"col-12"],[1,"d-flex","justify-content-end"],[1,"col-3","d-flex","justify-content-evenly"],["type","button","id","cancelModalButton",1,"btn","fs-16-vw","d-flex","align-items-center","justify-content-center",3,"click"],["type","button","id","saveModalButton",1,"btn","fs-16-vw","d-flex","align-items-center","justify-content-center",3,"click"],[1,"col-2","d-flex","align-items-center","text-white"],[1,"btn","deleteButton","fs-16-vw","px-2-vw",3,"click"],["src","../../../../assets/images/delete_icon3.png","alt",""]],template:function(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"b",5),e.YNc(6,wt,2,0,"span",6),e.YNc(7,bt,2,0,"span",6),e.YNc(8,yt,2,0,"span",6),e.YNc(9,Dt,2,0,"span",6),e.YNc(10,Ot,2,0,"span",6),e._uU(11," Office "),e.qZA()(),e.YNc(12,Mt,4,0,"div",7),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"p",10)(16,"b",5),e._uU(17,"Office Address"),e.qZA()(),e.TgZ(18,"app-address",11),e.NdJ("selectStateCityId",function(r){return n.getCityStateSelectedList(r)}),e.qZA(),e.TgZ(19,"p",12)(20,"b",5),e._uU(21,"Contact Person"),e.qZA(),e._uU(22," \xa0 "),e.TgZ(23,"span",13),e.NdJ("click",function(){e.CHM(a);const r=e.MAs(26);return e.KtG(n.addNewAddressEntry(r))}),e._uU(24," + Add Row "),e.qZA()(),e._UZ(25,"app-contact-detail",14,15),e.qZA()()(),e.TgZ(27,"div",16)(28,"div",17)(29,"div",18)(30,"div",19)(31,"button",20),e.NdJ("click",function(){return n.renderToSite()}),e._uU(32," Cancel "),e.qZA(),e.TgZ(33,"button",21),e.NdJ("click",function(){e.CHM(a);const r=e.MAs(26);return e.KtG(n.validateData(r))}),e._uU(34," Save "),e.qZA()()()()()}2&t&&(e.xp6(6),e.Q6J("ngIf",!(null!=n.apiData&&n.apiData.isEdit)),e.xp6(1),e.Q6J("ngIf",null==n.apiData?null:n.apiData.isEdit),e.xp6(1),e.Q6J("ngIf",!(null!=n.apiData&&n.apiData.isCorporateOffice||null!=n.apiData&&n.apiData.isSiteOffice)),e.xp6(1),e.Q6J("ngIf",null==n.apiData?null:n.apiData.isSiteOffice),e.xp6(1),e.Q6J("ngIf",null==n.apiData?null:n.apiData.isCorporateOffice),e.xp6(2),e.Q6J("ngIf",(null==n.apiData?null:n.apiData.isEdit)&&!(null!=n.apiData&&n.apiData.isCorporateOffice)),e.xp6(6),e.Q6J("apiData",e.HTZ(14,Tt,n.countryList,n.cityList,n.stateList,null==n.apiData?null:n.apiData.regionalList,null==n.apiData?null:n.apiData.projectList,null==n.apiData?null:n.apiData.isRegionalOffice))("errorField",n.errorFieldEnable)("showExtraData",null==n.apiData?null:n.apiData.isSiteOffice)("addressData",n.addressData),e.xp6(7),e.Q6J("errorField",n.errorFieldEnable)("apiData",e.l5B(21,At,null==n.apiData?null:n.apiData.departmentList,null==n.apiData?null:n.apiData.userTypeList,null==n.apiData?null:n.apiData.designationList,null!=n.apiData&&n.apiData.isCorporateOffice||null!=n.apiData&&n.apiData.isSiteOffice?null!=n.apiData&&n.apiData.isSiteOffice?3:1:2))("corporateOfficeId",n.corporateOfficeId)("contactData",n.contactData))},dependencies:[g.O5,C,v],styles:["#mainNavBar[_ngcontent-%COMP%]{background:linear-gradient(to right,#01587c 0%,#01444a 100%)}#saveButtonDiv[_ngcontent-%COMP%]{position:sticky;bottom:0;left:0;width:100%;background-color:#fff;display:flex;justify-content:flex-end}#saveButtonDiv[_ngcontent-%COMP%]   .btn-color[_ngcontent-%COMP%]{background:linear-gradient(to right,#3f85a5 0%,#01444a 100%);color:#fff;width:6.944vw;border-radius:.139vw;height:2.361vw}.deleteButton[_ngcontent-%COMP%]{color:#fff;border:.069vw solid #fff;width:64%;font-weight:500;height:2.569vw;align-items:center;display:flex!important}.deleteButton[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.389vw;height:1.389vw}"]})}var T=c(1391);const It=[{path:"setup",component:N,data:{role:["SuperAdmin","Admin"]},canActivate:[T.p]},{path:"office/create",component:M,data:{role:["SuperAdmin","Admin"]},canActivate:[T.p]},{path:"office/edit",component:M,data:{role:["SuperAdmin","Admin"]},canActivate:[T.p]},{path:"access-management",component:x,data:{role:["SuperAdmin","Admin"]},canActivate:[T.p]},{path:"user-management",component:L,data:{role:["SuperAdmin","Admin"]},canActivate:[T.p]}];class F{static#e=this.\u0275fac=function(t){return new(t||F)};static#t=this.\u0275mod=e.oAB({type:F});static#i=this.\u0275inj=e.cJS({providers:[g.uU],imports:[g.ez,P.Bz.forChild(It),ye.m]})}}}]);
//# sourceMappingURL=src_app_components_organizationAdmin_organization_module_ts.js.map